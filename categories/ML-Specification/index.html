<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Category: ML Specification - UBeaRLy</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="UBeaRLy&#039;s Proxy"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="UBeaRLy&#039;s Proxy"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="UBeaRLy"><meta property="og:url" content="https://xyy15926.github.io/"><meta property="og:site_name" content="UBeaRLy"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://xyy15926.github.io/img/og_image.png"><meta property="article:author" content="UBeaRLy"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://xyy15926.github.io"},"headline":"UBeaRLy","image":["https://xyy15926.github.io/img/og_image.png"],"author":{"@type":"Person","name":"UBeaRLy"},"publisher":{"@type":"Organization","name":"UBeaRLy","logo":{"@type":"ImageObject","url":"https://xyy15926.github.io/img/logo.svg"}},"description":""}</script><link rel="alternate" href="/atom.xml" title="UBeaRLy" type="application/atom+xml"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/darcula.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Oxanium:wght@300;400;600&amp;family=Roboto+Mono"><link rel="stylesheet" href="/css/cyberpunk.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><script data-ad-client="ca-pub-5385776267343559" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="follow_it-verification-code" content="SVBypAPPHxjjr7Y4hHfn"><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="UBeaRLy" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Visit on GitHub" href="https://github.com/xyy15926/proxy"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">Categories</a></li><li class="is-active"><a href="#" aria-current="page">ML Specification</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-04-06T01:45:15.000Z" title="4/6/2021, 9:45:15 AM">2021-04-06</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-08-04T02:55:20.000Z" title="8/4/2021, 10:55:20 AM">2021-08-04</time></span><span class="level-item"><a class="link-muted" href="/categories/ML-Specification/">ML Specification</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/FinTech/">FinTech</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/FinTech/Risk-Control/">Risk Control</a></span><span class="level-item">14 minutes read (About 2082 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/ML-Specification/FinTech/Risk-Control/credit_risks.html">风险控制</a></h1><div class="content"><h2 id="欺诈风险"><a href="#欺诈风险" class="headerlink" title="欺诈风险"></a>欺诈风险</h2><ul>
<li>欺诈：以故意欺瞒事实而诱使对方发生错误认识的故意行为，通常目的是使欺诈者获利<ul>
<li>欺诈的行为要素<ul>
<li>使人发生错误认识为目的</li>
<li>故意行为</li>
</ul>
</li>
<li>欺诈可以分为<ul>
<li>冒用：冒用他人身份，通过生物信息技术等容易发现</li>
<li>伪装：伪造部分信息，相对而言更难识别</li>
</ul>
</li>
<li>金融领域“资金就是生产资料”使得欺诈者的非法获利更容易</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/31708263">https://zhuanlan.zhihu.com/p/31708263</a></li>
</ul>
</blockquote>
<h3 id="欺诈事件"><a href="#欺诈事件" class="headerlink" title="欺诈事件"></a>欺诈事件</h3><ul>
<li>白户：账户信息缺失，没有足够数据对借款人进行风险评估<ul>
<li>内部白户：新注册、无申贷历史记录</li>
<li>外部白户：人行征信、三方征信无覆盖</li>
</ul>
</li>
<li>黑户：账户存在逾期、失信、欺诈记录<ul>
<li>内部黑户：历史订单逾期</li>
<li>外部黑户：人行征信、三方征信黑</li>
<li>论坛、公开渠道监控</li>
</ul>
</li>
<li>恶意欺诈：账户通过伪造资料、蓄意骗贷<ul>
<li>伪造账单流水记录骗取更高额度</li>
<li>恶意欺诈账户可能涉及不良嗜好，如黄赌毒等</li>
</ul>
</li>
<li>身份冒用：伪冒他人身份进行欺诈骗贷<ul>
<li>熟人冒用</li>
<li>他人盗用</li>
<li>一般可通过信审、人脸识别、活体验证核验借款人身份</li>
</ul>
</li>
<li>以贷养贷<ul>
<li>放大共贷风险杠杆</li>
<li>可通过三方征信机构的多头借贷产品识别</li>
</ul>
</li>
<li>中介欺诈：黑中介哄骗或招揽客户实施骗贷<ul>
<li>黑中介利用风控漏洞大规模攻击，造成大量资损</li>
</ul>
</li>
<li>传销：有组织的开展收费并发展多级下线，存在集中骗贷风险<ul>
<li>存在老客拉新，从关系网络上具有明显星状结构</li>
</ul>
</li>
</ul>
<h3 id="欺诈者身份"><a href="#欺诈者身份" class="headerlink" title="欺诈者身份"></a>欺诈者身份</h3><ul>
<li><p>第一方欺诈：欺诈者用真实身份进行欺诈</p>
<ul>
<li>严格来说不是欺诈，没有在身份信息上误导平台</li>
<li>应对措施<ul>
<li>黑名单</li>
</ul>
</li>
</ul>
</li>
<li><p>第二方欺诈：企业、渠道内员工进行内部欺诈、内外勾结</p>
<ul>
<li>即巴塞尔协议操作风险中的内部欺诈</li>
<li>应对措施<ul>
<li>内控：权限获取合理、流程上风险分散、操做可追溯</li>
</ul>
</li>
</ul>
</li>
<li><p>第三方欺诈：非欺诈者自身、企业内部的第三方欺诈</p>
<ul>
<li>名义借贷者身份信息通过黑色产业链购买、养号，作为黑产军团的一个链条</li>
<li>申请欺诈<ul>
<li>账户盗用</li>
<li>资料造假</li>
<li>恶意违约</li>
</ul>
</li>
<li>交易欺诈<ul>
<li>账户冒险</li>
<li>养卡</li>
<li>套现</li>
</ul>
</li>
<li>应对措施<ul>
<li>对抗性强、低侵入、性价比各种能力和技术</li>
<li>社交网络发现</li>
<li>数据交叉对比</li>
<li>模型客户用户画像</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="获取非法收益的时间"><a href="#获取非法收益的时间" class="headerlink" title="获取非法收益的时间"></a>获取非法收益的时间</h3><ul>
<li><p><em>First Payment Default</em> 首轮欺诈</p>
<ul>
<li>首期失联</li>
</ul>
</li>
<li><p><em>Bust-out</em> 余额欺诈</p>
<ul>
<li>短时间将授信刷高再获利离场</li>
</ul>
</li>
</ul>
<h3 id="收益来源环节"><a href="#收益来源环节" class="headerlink" title="收益来源环节"></a>收益来源环节</h3><blockquote>
<ul>
<li>单个客户利润 = 贷款收益 - 资金成本 - 信用成本 - 获客成本<ul>
<li>获客成本 - 税收成本</li>
</ul>
</li>
</ul>
</blockquote>
<ul>
<li>骗贷：信用成本中的风险成本</li>
<li>羊毛：获客成本中的补贴</li>
<li>刷量：获客成本中的广告费</li>
<li>虚假短信：运营费用中的短信流量费</li>
</ul>
<h3 id="得利方、损失方"><a href="#得利方、损失方" class="headerlink" title="得利方、损失方"></a>得利方、损失方</h3><ul>
<li>C骗C：在互金领域不多<ul>
<li>即使是P2P，也会有平台兜底</li>
</ul>
</li>
<li>B骗C</li>
<li>C骗B</li>
<li>B骗B</li>
</ul>
<h2 id="反欺诈"><a href="#反欺诈" class="headerlink" title="反欺诈"></a>反欺诈</h2><ul>
<li><p>防范欺诈的重要障碍是欺诈难以标注，是通过贷后表现推断贷前
意图</p>
<ul>
<li>一般只有真正联系到本人或失联，很难有足够证据证明是欺诈导致的逾期，而不是信用导致逾期</li>
<li>欺诈导致逾期往往有以下特征<ul>
<li>首逾：最常作为欺诈指标<ul>
<li>对第一方、第三方欺诈，往往会发生首逾</li>
<li>对第二方欺诈，考虑到内部人员的考核、规避等
原因，有可能会正常还款1到2期，此类欺诈较难认定</li>
</ul>
</li>
<li>催收追回率更高</li>
</ul>
</li>
</ul>
</li>
<li><p>反欺诈调研步骤</p>
<ul>
<li>风险事件发现：具有敏锐的风险嗅觉，发现可疑事件</li>
<li>欺诈场景还原：广泛收集各渠道信息还原欺诈场景，调研分析背后可能原因</li>
<li>风险规则提炼：从欺诈场景中提炼相应专家规则，拦截欺诈</li>
<li>技术算法支持：搜集相应数据，根据数据类型和场景特点寻找合适算法识别欺诈</li>
</ul>
</li>
<li><p>反欺诈除了常规的策略部署外，还需要考虑人性：延迟模型和规则的效用</p>
<ul>
<li>抓大放小：允许小资损，随机抽取小比例的欺诈者通过<ul>
<li>隐藏防控点，用于积累黑名单</li>
<li>迷惑欺诈团伙</li>
</ul>
</li>
<li>虚假额度：设置虚假授信额度，但借口其他理由不放款</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/96778969">https://zhuanlan.zhihu.com/p/96778969</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/c_147252758">https://zhuanlan.zhihu.com/c_147252758</a></li>
</ul>
</blockquote>
<h3 id="调研欺诈风险渠道"><a href="#调研欺诈风险渠道" class="headerlink" title="调研欺诈风险渠道"></a>调研欺诈风险渠道</h3><ul>
<li>实时大盘监控：适合识别黑中介风险、传销风险等团伙欺诈<ul>
<li>设备聚集性风险 <em>LBS</em>、<em>WIFI</em></li>
<li>地域欺诈风险，如朋克村</li>
</ul>
</li>
<li>信审催收反馈<ul>
<li>通过电话外呼、核验用户身份、咨询借款动机，根据用户反应发现身份伪冒</li>
</ul>
</li>
<li>论坛舆情监控<ul>
<li>对相关论坛、讨论组等检测仪监控，发现市场动向</li>
<li>理解欺诈人群的心理特征、社会身份</li>
</ul>
</li>
<li>黑产卧底调研<ul>
<li>线上加入相关社区，站在欺诈账户立场上，找寻风控系统弱点</li>
<li>线下去欺诈案件多发地，实地调研、学习黑产手法</li>
</ul>
</li>
</ul>
<h3 id="反欺诈专家规则"><a href="#反欺诈专家规则" class="headerlink" title="反欺诈专家规则"></a>反欺诈专家规则</h3><ul>
<li><p>针对网贷黑中介识别的风险规则</p>
<ul>
<li>中介通讯录长常常会存储客户号码，并加以备注</li>
<li>因为需要联系客户，运营商数据中往往会留下痕迹</li>
<li>中介网贷申请手法更熟练，在申请页面停留时间短</li>
<li>使用网络可能包含“网贷”等敏感信息</li>
<li>人脸活体验证时存在照片翻拍、视频通话</li>
</ul>
</li>
<li><p>对反欺诈规则同样可按照一般规则进行评价</p>
<ul>
<li>规则欺诈命中次数、命中率<ul>
<li>规则欺诈命中次数 = 命中触发报警之后被认定为欺诈次数</li>
<li>欺诈命中率 = 规则欺诈命中次数 / 规则报警次数</li>
</ul>
</li>
<li>综合欺诈命中次数<ul>
<li>综合欺诈次数 = 规则欺诈命中次数 + 逾期调查认定欺诈数</li>
<li>综合欺诈命中率</li>
</ul>
</li>
<li>考虑到欺诈逾期特征，可以把首逾、催收回账户重点调查</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>专家规则有高准确率的优点，但是覆盖的人群有限，性价比低，过多会导致规则集冗长，不利于维护</li>
</ul>
</blockquote>
<h3 id="反欺诈算法"><a href="#反欺诈算法" class="headerlink" title="反欺诈算法"></a>反欺诈算法</h3><ul>
<li><p>应用方向</p>
<ul>
<li>辅助调查人员从单个案件的调查上升到对团体的调查，提高人工审核效率</li>
<li>通过用户之间的关联关系，给调查人员提供更多分析线索</li>
</ul>
</li>
<li><p>算法研究方向</p>
<ul>
<li>基于社交网络的模型<ul>
<li>基于通讯录、运营商数据，采用基于图的社区发现算法</li>
</ul>
</li>
<li>基于无监督聚类的模型</li>
<li>知识图谱</li>
<li><em>Embedding</em> 特征构建<ul>
<li>基于埋点行为数据，生成 <em>Embedding</em> 特征</li>
</ul>
</li>
<li>文本分类<ul>
<li>基于论坛文本、通讯录名称、<em>WIFI</em> 名称分类</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="First-Payment-Deliquency模型"><a href="#First-Payment-Deliquency模型" class="headerlink" title="First Payment Deliquency模型"></a><em>First Payment Deliquency</em>模型</h4><ul>
<li><p><em>FPD</em> 模型：以首逾作为目标变量建立模型</p>
<ul>
<li>假设：欺诈者动机是骗钱，那么第一期就会逾期</li>
<li>入模变量一般是负面特征<ul>
<li>安装负面 App 数量</li>
<li>历史逾期次数</li>
</ul>
</li>
</ul>
</li>
<li><p>基于欺诈的还款表现作为理论支撑，但是也存在一定缺陷</p>
<ul>
<li>逾期标签存在滞后性，首逾标签存在至少一个月，不利于快速响应</li>
<li>放贷样本同总体有偏，在其上训练模型存在偏差，会低估风险</li>
</ul>
</li>
</ul>
<h2 id="信用风险"><a href="#信用风险" class="headerlink" title="信用风险"></a>信用风险</h2></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-01-11T00:49:48.000Z" title="1/11/2021, 8:49:48 AM">2021-01-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-07-16T08:28:43.000Z" title="7/16/2021, 4:28:43 PM">2021-07-16</time></span><span class="level-item"><a class="link-muted" href="/categories/ML-Specification/">ML Specification</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/FinTech/">FinTech</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/FinTech/Risk-Control/">Risk Control</a></span><span class="level-item">18 minutes read (About 2745 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/ML-Specification/FinTech/Risk-Control/rc_rules.html">风控规则</a></h1><div class="content"><h2 id="风控规则"><a href="#风控规则" class="headerlink" title="风控规则"></a>风控规则</h2><ul>
<li>规则的类型<ul>
<li>条件判断：决策路径独立</li>
<li>决策表：决策路径有交集、规律</li>
<li>决策树：决策路径不规律、可能重复检查同一数据</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>规则引擎：接受数据输入，解释业务规则，根据业务规则、使用
  预定义语义做出业务决策</li>
</ul>
</blockquote>
<h3 id="制定原则"><a href="#制定原则" class="headerlink" title="制定原则"></a>制定原则</h3><ul>
<li>监管、公司政策类<ul>
<li>年龄准入</li>
<li>行业准入<ul>
<li>有金融属性行业</li>
<li>政策敏感娱乐行业</li>
</ul>
</li>
<li>地域准入</li>
<li>场景准入</li>
</ul>
</li>
<li>风控层面<ul>
<li>黑名单类</li>
<li>多头类：申请次数</li>
<li>共债类：申请量</li>
<li>反欺诈类</li>
<li>评分拒绝类</li>
</ul>
</li>
</ul>
<h3 id="规则发现"><a href="#规则发现" class="headerlink" title="规则发现"></a>规则发现</h3><h4 id="规则评分"><a href="#规则评分" class="headerlink" title="规则评分"></a>规则评分</h4><ul>
<li><p>强弱规则</p>
<ul>
<li>强规则：可作为独立规则，直接指导决策</li>
<li>弱规则：具有一定区分度，但不决定性</li>
</ul>
</li>
<li><p>弱规则可组合使用，通过评分方式衡量弱规则</p>
<ul>
<li>使用规则评分衡量规则影响力</li>
<li>规则影响力则可以通过命中坏占比、odds变动衡量</li>
<li>设置阈值，命中规则的评分之和超过阈值才触发报警</li>
</ul>
</li>
</ul>
<h4 id="笛卡尔积法"><a href="#笛卡尔积法" class="headerlink" title="笛卡尔积法"></a>笛卡尔积法</h4><ul>
<li>步骤<ul>
<li>获取变量：定义好坏，关联特征变量</li>
<li>变量筛选：通过IV值等指标快速筛选变量</li>
<li>指标统计：分组统计申请量、放款量、坏账量等指标</li>
<li>透视呈现：分申请率、放款率、坏账率等指标制作交互，如列联表等</li>
<li>规则提取：结合各维度选择满足要求的组别，提取规则逻辑</li>
<li>规则评估：评估跨期稳定性</li>
<li>策略上线</li>
</ul>
</li>
</ul>
<h4 id="决策树法"><a href="#决策树法" class="headerlink" title="决策树法"></a>决策树法</h4><ul>
<li>决策树法优势<ul>
<li>可根据划分依据自动对人群细分</li>
</ul>
</li>
<li>决策树法缺陷<ul>
<li>难以调整决策树划分结果</li>
<li>划分结果可能缺乏业务意义</li>
<li>可能出现过拟合现象</li>
</ul>
</li>
</ul>
<h3 id="规则阈值设置"><a href="#规则阈值设置" class="headerlink" title="规则阈值设置"></a>规则阈值设置</h3><ul>
<li><p>阈值设置指标</p>
<ul>
<li><em>Lift</em> 值</li>
<li><em>收益/风险比</em></li>
</ul>
</li>
<li><p>阈值设置依据</p>
<ul>
<li>对分类取值，根据 <em>Lift</em> 值、<em>收益/风险比</em> 确定是否作为规则</li>
<li>对有序、数值取值，结合不同阈值点计算 <em>Lift</em> 值、<em>收益/风险比</em>，绘制曲线<ul>
<li>曲线平缓变化，则阈值切分收益变化稳定，阈值调整空间比较大</li>
<li>曲线存在明显陡、缓变化，则阈值切分收益在拐点处收益较大，阈值调整空间有限</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="规则评价"><a href="#规则评价" class="headerlink" title="规则评价"></a>规则评价</h2><ul>
<li>案件调查<ul>
<li>用信前报警调查</li>
<li>逾期后调查</li>
<li>根据不同目标，可以对不同的案件区分重点调查</li>
</ul>
</li>
</ul>
<h3 id="线下-离线（标签已知）效果评估"><a href="#线下-离线（标签已知）效果评估" class="headerlink" title="线下 / 离线（标签已知）效果评估"></a>线下 / 离线（标签已知）效果评估</h3><ul>
<li>自身效果评估<ul>
<li>混淆矩阵<ul>
<li><em>TPR</em>/<em>FPR</em></li>
<li>准确率/误拒率</li>
</ul>
</li>
<li>提升度<ul>
<li>拒绝样本中坏样本<em>Lift</em>提升度</li>
<li>通过样本中好样本<em>Lift</em>提升度</li>
</ul>
</li>
<li>通过率、拒绝率</li>
<li>加权收益：好数量 <em> 好收益 + 坏数量 </em> 坏收益</li>
</ul>
</li>
<li>对比/增量效果评估：和其他数据源比较<ul>
<li>有效差异率：查得命中 / 其他通过且为坏样本</li>
<li>无效差异率：查得命中 / 其他拒绝</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>类似名单类数据评估</li>
</ul>
</blockquote>
<h3 id="线上-在线（标签未知）效果评估"><a href="#线上-在线（标签未知）效果评估" class="headerlink" title="线上 / 在线（标签未知）效果评估"></a>线上 / 在线（标签未知）效果评估</h3><ul>
<li><p>规则报警次数、报警率</p>
<ul>
<li>规则（触发）报警次数：命中规则后账户被拒绝次数<ul>
<li>对强规则，即为规则命中次数</li>
<li>对弱规则，小于规则命中次数</li>
</ul>
</li>
<li>规则报警率 = 规则报警次数 / 规则命中次数</li>
<li>规则报警率低、趋势走低表明规则需修正</li>
</ul>
</li>
<li><p>规则调查次数、调查率</p>
<ul>
<li>规则调查次数 = 对案件调查分析时调查其次数
（短路调查）</li>
<li>规则调查率 = 规则调查次数 / 规则报警次数</li>
<li>调查率低则因考虑其他规则替代该规则，或<code>or</code>合并规则</li>
<li>规则可以为调查提供提示，而过多不能给调查提供提示的
规则反而浪费时间</li>
</ul>
</li>
<li><p>规则命中次数、命中率</p>
<ul>
<li>规则命中次数 = 命中触发报警之后被认定为坏样本数</li>
<li>规则命中率 = 规则命中次数 / 规则报警次数</li>
</ul>
</li>
<li><p>综合命中次数</p>
<ul>
<li>综合命中次数 = 规则命中次数 + 逾期调查认定坏样本数</li>
<li>综合命中率 = 综合命中次数 / 规则报警次数</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>在线效果效果是无法在体系内自评估的，必须引入外部信息，包括：人工审核、额外数据源、扩招回机制等</li>
</ul>
</blockquote>
<h3 id="规则稳定性"><a href="#规则稳定性" class="headerlink" title="规则稳定性"></a>规则稳定性</h3><h4 id="通过率波动应对"><a href="#通过率波动应对" class="headerlink" title="通过率波动应对"></a>通过率波动应对</h4><ul>
<li>寻找通过率变动的时点</li>
<li>计算各维度通过率波动程度PSI<ul>
<li>定位各策略节点主次影响</li>
<li>分析主要影响策略节点规则、阈值</li>
</ul>
</li>
<li>指导决策</li>
</ul>
<h4 id="逾期率波动应对"><a href="#逾期率波动应对" class="headerlink" title="逾期率波动应对"></a>逾期率波动应对</h4><ul>
<li>定位逾期率波动客群：存量客户、新增客户<ul>
<li>MOD</li>
</ul>
</li>
</ul>
<h3 id="旁路规则"><a href="#旁路规则" class="headerlink" title="旁路规则"></a>旁路规则</h3><h3 id="Swap-Set-Analysis"><a href="#Swap-Set-Analysis" class="headerlink" title="Swap Set Analysis"></a><em>Swap Set Analysis</em></h3><blockquote>
<ul>
<li>新、旧模型可用离线指标比较优劣，但最终要在业务中比较通过率、坏账率，二者正相关，<em>swap set</em> 则是反应模型的通过的变化</li>
</ul>
</blockquote>
<ul>
<li><p><em>Swap Set Analysis</em> 用于分析新、旧模型更替</p>
<ul>
<li>根据订单在新、旧模型的通过情况，可以分为三类<ul>
<li><em>Swap-in Population</em>：旧模型拒绝但新模型接受</li>
<li><em>Swap-out Population</em>：旧模型接受但新模型拒绝</li>
<li><em>No Change</em>：新、旧模型同时接受、拒绝</li>
</ul>
</li>
<li>从 <em>swap set</em> 角度评价 “新模型优于旧模型”<ul>
<li><em>Swap-in Population &gt;= Swap-out Population</em> 且坏账率不升</li>
<li><em>Swap-in Population = Swap-out Population</em> 、坏账率不变，但用户响应率提升</li>
</ul>
</li>
</ul>
</li>
<li><p>实务中，已上线的旧模型拒绝订单无法获取表现期，只能通过拒绝推断近似得到坏账率</p>
<ul>
<li>同时间窗 <em>A/B-Test</em>：切分流量让旧模型只打分不拒绝</li>
<li>跨时间窗 <em>A/B-Test</em>：用旧模型在灰度期坏账率替代</li>
</ul>
</li>
</ul>
<h3 id="扩召回"><a href="#扩召回" class="headerlink" title="扩召回"></a>扩召回</h3><p>扩召回：独立召回之外，利用额外模型扩召回部分样本</p>
<ul>
<li><p>此处召回一般指通过 <strong>成熟</strong> 的规则、模型从全体中获取部分样本</p>
<ul>
<li>召回一般为历史沉淀、专家经验规则</li>
<li>召回的理由充足，但泛化性较差</li>
</ul>
</li>
<li><p>扩召回和二次排序训练用的样本是相同的，但</p>
<ul>
<li>二次排序是在召回的样本基础上再次排序<ul>
<li>目标：（全局）排序能力</li>
<li>评价标准：<em>AUC</em>、头部准召</li>
</ul>
</li>
<li>扩召回一般是独立于召回建立的模型<ul>
<li>目标：学习召回样本的规律，完善召回机制、补充召回样本<ul>
<li>因此，扩招回也可以用召回样本作为正样本</li>
<li>扩召回也可用于在线验证新、旧规则的有效性</li>
</ul>
</li>
<li>评价标准：额外召回准确率（对召回样本的学习能力）<ul>
<li>事实上，若采用召回样本作为正样本，则 <em>AUC</em> 为 1 的扩召回是无价值的，只是复现了召回</li>
</ul>
</li>
<li>特征：可能包含一些专供于扩召回使用的特征</li>
<li>扩召回的正样本可能还包括人工举报、隐案等</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="准入规则"><a href="#准入规则" class="headerlink" title="准入规则"></a>准入规则</h2><ul>
<li>风控准入规则应为强拒绝规则<ul>
<li>不满足任何规则均会被拒绝</li>
<li>规则无需经过复杂的规则衍生</li>
<li>策略理念：验证借款人依法合规未被政策限制</li>
<li>风控流程中首道防线<ul>
<li>准入策略已经趋同</li>
<li>但对不同信贷场景仍应采取更适应业务的准入规则</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="基础认证模块"><a href="#基础认证模块" class="headerlink" title="基础认证模块"></a>基础认证模块</h3><ul>
<li>风控基础认证模块：验证申请人真实性<ul>
<li>身份证信息验证</li>
<li>人脸信息验证</li>
<li>银行卡四要素验证</li>
<li>运营商三要素验证</li>
</ul>
</li>
</ul>
<h3 id="按数据来源分类"><a href="#按数据来源分类" class="headerlink" title="按数据来源分类"></a>按数据来源分类</h3><ul>
<li>个人信用类<ul>
<li>个人基本信息<ul>
<li>年龄准入</li>
<li>地区准入</li>
<li>行业准入</li>
</ul>
</li>
<li>经济能力信息<ul>
<li>月收入</li>
<li>流水</li>
</ul>
</li>
<li>社交信息</li>
</ul>
</li>
<li>设备信息<ul>
<li>短信</li>
<li>APP安装信息</li>
</ul>
</li>
<li>外部数据源<ul>
<li>征信报告</li>
<li>外部黑名单</li>
</ul>
</li>
<li>行为数据<ul>
<li>活动轨迹</li>
<li>登录、注册时间</li>
</ul>
</li>
<li>评分卡规则</li>
</ul>
<h2 id="黑、白名单"><a href="#黑、白名单" class="headerlink" title="黑、白名单"></a>黑、白名单</h2><h3 id="白名单"><a href="#白名单" class="headerlink" title="白名单"></a>白名单</h3><ul>
<li><p>白名单：风险相对可知可控的客户构成的内部名单</p>
<ul>
<li>业务初期：通过白名单控制入口<ul>
<li>控制放量节奏</li>
<li>降低风险</li>
<li>通过宽松风控规则提高审批通过率</li>
<li>通过贷前策略规则筛选白名单，协助调整贷前策略</li>
</ul>
</li>
<li>业务中期：部分客户走特殊的贷前审批流程，满足特殊审批
要求</li>
</ul>
</li>
<li><p>白名单筛选方式：有部分存量数据情况下</p>
<ul>
<li>联合建模：缺乏特定业务场景预测变量，与外部机构建模
补充预测变量</li>
<li>内部数据探索：寻找与违约表现相关性较强的特征规则<ul>
<li>类似场景、产品</li>
<li>纯粹凭借专家经验规则</li>
</ul>
</li>
<li>引入外部数据匹配</li>
</ul>
</li>
</ul>
<h3 id="黑名单"><a href="#黑名单" class="headerlink" title="黑名单"></a>黑名单</h3><ul>
<li><p>黑名单：还款能力、还款意愿不能满足正常客户标准</p>
<ul>
<li>通常多个好客户才能覆盖坏客户的本金损失</li>
<li>通过黑名单客户全部拒绝，但是对于导流助贷机构，业务
核心是流量和客户质量，拒绝全部黑名单客群成本巨大，
可能会随机、结合评分放过部分</li>
</ul>
</li>
<li><p>黑名单建立</p>
<ul>
<li>建立黑名单参考维度<ul>
<li>还款表现</li>
<li>渠道</li>
<li>利率</li>
<li>失信名单</li>
</ul>
</li>
<li>黑名单主体<ul>
<li>身份证</li>
<li>手机号</li>
<li>邮箱</li>
<li>银行卡</li>
<li>IP</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="三方黑名单"><a href="#三方黑名单" class="headerlink" title="三方黑名单"></a>三方黑名单</h4><ul>
<li><p>自建黑名单命中率不高（二次申请概率低），且需要长期
积累</p>
</li>
<li><p>不同三方黑名单往往会有其侧重点</p>
<ul>
<li>团伙欺诈名单</li>
<li>公安、司法名单</li>
<li>被执行人名单</li>
</ul>
</li>
<li><p>三方黑名单效果也有好有坏，对效果较差、但通过率影响
不大黑名单也可以考虑保留</p>
<ul>
<li>黑名单一般是查得收费，外挂较多黑名单不会提升成本</li>
<li>黑名单可视为容错机制，黑名单不一定能所有样本上
表现优秀，保留其可防止欺诈团伙等集中攻击</li>
</ul>
</li>
<li><p>同样值得注意的是，黑名单的质量需要考核</p>
<ul>
<li>非公信黑名单定义各家不同</li>
<li>名单没有明确的退出机制</li>
<li>黑名单按查得收费，有些黑名单会掺沙子</li>
<li>有些名单提供商同时作为信贷放贷方，有动力将优质客户
截留，将其添加进名单</li>
</ul>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-01-11T00:47:42.000Z" title="1/11/2021, 8:47:42 AM">2021-01-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-01-11T00:47:42.000Z" title="1/11/2021, 8:47:42 AM">2021-01-11</time></span><span class="level-item"><a class="link-muted" href="/categories/ML-Specification/">ML Specification</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/FinTech/">FinTech</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/FinTech/Risk-Control/">Risk Control</a></span><span class="level-item">19 minutes read (About 2904 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/ML-Specification/FinTech/Risk-Control/risk_management.html">风险管理</a></h1><div class="content"><h2 id="互金风控"><a href="#互金风控" class="headerlink" title="互金风控"></a>互金风控</h2><ul>
<li><p>互金相对传统金融风控有更多挑战</p>
<ul>
<li>模型迭代速度要求高<ul>
<li>互金市场波动剧烈</li>
<li>长尾劣质客群更不稳定，容易导致样本波动</li>
</ul>
</li>
<li>数据源采集种类更多<ul>
<li>弱相关数据更多，处理难度更大</li>
<li>政策合规要求，数据采集和使用更规范</li>
</ul>
</li>
</ul>
</li>
<li><p>风控技术无关强弱，关键只在于“是否有效”</p>
<ul>
<li>时机选择</li>
<li>制度安排及辅助</li>
<li>背后所驱动的支撑逻辑</li>
</ul>
</li>
<li><p>风控领域，大数据等技术的应用场景和方向</p>
<ul>
<li>自动化，尽量减少人工干预，减少主观臆断</li>
<li>实现“差异化”，客制化产品设计<ul>
<li>补全客户画像</li>
<li>挖掘客户需求</li>
</ul>
</li>
<li>精准度，需要模型驱动<ul>
<li>交易成本评估</li>
<li>差异化定价</li>
<li>反欺诈</li>
</ul>
</li>
<li>创新型评估<ul>
<li>底层数据共享</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="风控策略"><a href="#风控策略" class="headerlink" title="风控策略"></a>风控策略</h3><ul>
<li><p>风控策略本质是规则集的逻辑组合</p>
<ul>
<li>在贷前审批阶段减少风险事件发生</li>
<li>挽回风险事件发生的造成的损失</li>
<li>筛选用户：过滤高风险用户t保留低风险用户</li>
<li>对客群分级实行个性化审批流程，提高审批效率</li>
</ul>
</li>
<li><p>广义看，策略也是一种模型</p>
<ul>
<li>模型通过算法挖掘数据学习规律、构造特征；而策略则是
结合具体业务场景，依赖人工经验对客群细分，如决策树、
笛卡尔积分群</li>
<li>模型往往经过长时间稳定性验证，只有出现明显衰减时才会
触发迭代；策略上线、下线灵活，可以根据近期样本灵活
调整</li>
<li>模型需要在策略中应用才能发挥效果</li>
</ul>
</li>
</ul>
<h3 id="风险控制"><a href="#风险控制" class="headerlink" title="风险控制"></a>风险控制</h3><ul>
<li><p>信用风险：侧重风险管理，在风险和收益之间寻求平衡，追求
利润最大化</p>
<ul>
<li>通过金融属性数据识别客户还款能力、意愿</li>
</ul>
</li>
<li><p>欺诈风险：侧重严防拒绝，属于欺诈必然拒绝</p>
<ul>
<li>跟进欺诈风险事件，快速响应</li>
</ul>
</li>
<li><p>反欺诈和信用顺序各有优劣，但是应该都做完之后得到综合授信
决策</p>
<ul>
<li>反欺诈在后：欺诈后需要人工核验，处于成本考虑后置</li>
<li>信用在后：希望进入模型的数据更真实，否则会欺骗模型
造成错误决策</li>
</ul>
</li>
</ul>
<h2 id="模型风险"><a href="#模型风险" class="headerlink" title="模型风险"></a>模型风险</h2><blockquote>
<ul>
<li>模型：应用统计、经济、金融或数学理论、技术和假设将输入
  数据处理为定量估计的量化方法、系统或途径</li>
</ul>
</blockquote>
<ul>
<li><p>模型风险来源</p>
<ul>
<li>模型自身错误：模型设计、开发以及IT实施时发生的错误<ul>
<li>统计理论应用错误</li>
<li>目标变量错误</li>
<li>样本选择错误</li>
<li>变量挑选、衍生错误</li>
<li>算法错误</li>
<li>在信息系统中执行与开发不一致</li>
</ul>
</li>
<li>模型被不恰当的使用<ul>
<li>模型套用</li>
<li>市场环境、消费者行为习惯发生重大变化</li>
</ul>
</li>
</ul>
</li>
<li><p>美国监管部门围绕“有效挑战”指导原则，建立模型风险监管体系</p>
<ul>
<li>动力：挑战者必须在组织上相对独立于模型开发者，有正向
激励挑战</li>
<li>胜任力：挑战者具备相关专业知识和技能</li>
<li>影响力：挑战者必须具备权威、组织内地位，来自更管理层
的承诺和支持，保障被挑战方对其意见有足够重视</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/95MVhXgyG9h5KqRphP14cA">https://mp.weixin.qq.com/s/95MVhXgyG9h5KqRphP14cA</a></li>
</ul>
</blockquote>
<h3 id="风险监管体系框架"><a href="#风险监管体系框架" class="headerlink" title="风险监管体系框架"></a>风险监管体系框架</h3><ul>
<li>第一防线<ul>
<li>模型开发者：开发、上线、使用、监控和维护模型，配合
模型验证部门的独立验证工作</li>
<li>管理维护者</li>
<li>使用者</li>
</ul>
</li>
<li>第二防线<ul>
<li>模型验证部门：独立验证模型</li>
<li>模型风险监管部门：草拟、执行模型风险管理政策</li>
</ul>
</li>
<li>第三防线<ul>
<li>内部审计：评估模型风险管理是否完整、严谨、有效</li>
</ul>
</li>
<li>外部防线：政府监管<ul>
<li>美联储</li>
<li>美国货币监理署</li>
</ul>
</li>
</ul>
<h3 id="风险监管具体要求"><a href="#风险监管具体要求" class="headerlink" title="风险监管具体要求"></a>风险监管具体要求</h3><h4 id="Model-Inventory模型清单"><a href="#Model-Inventory模型清单" class="headerlink" title="Model Inventory模型清单"></a><em>Model Inventory</em>模型清单</h4><ul>
<li>模型状态</li>
<li>模型目的、设计的目的产品、预期和实际使用的场景、使用限制</li>
<li>输入数据、组件的类型和来源</li>
<li>输出及其预期用途</li>
<li>模型运行状态、更新时间、政策例外</li>
<li>开发、验证负责人</li>
<li>已完成和计划当中的验证目的</li>
<li>有效期</li>
</ul>
<h4 id="Model-Development模型开发"><a href="#Model-Development模型开发" class="headerlink" title="Model Development模型开发"></a><em>Model Development</em>模型开发</h4><ul>
<li>明确模型目的<ul>
<li>设计、理论、逻辑的研究支持</li>
<li>模型组件、算法的优缺点</li>
<li>与其他理论方法的比较</li>
</ul>
</li>
<li>评估数据质量<ul>
<li>证明数据、信息适合模型</li>
<li>替代数据需证明、记录</li>
<li>对必要的数据跟踪分析，尤其是外部数据、新客群、
新产品</li>
</ul>
</li>
<li>测试确保符合预期<ul>
<li>准确性</li>
<li>鲁棒性</li>
<li>稳定性</li>
</ul>
</li>
</ul>
<h4 id="Model-Implementatioin-and-Model-Use"><a href="#Model-Implementatioin-and-Model-Use" class="headerlink" title="Model Implementatioin and Model Use"></a><em>Model Implementatioin and Model Use</em></h4><ul>
<li>模型实施的需要有严谨的校验规范，保证上线模型与开发模型
一致<ul>
<li>结果（包括中间结果）一致</li>
<li>底层数据一致</li>
<li>计算逻辑一致</li>
</ul>
</li>
<li>模型使用可以进一步评估模型性能<ul>
<li>模型使用者反馈模型使用情况、业务契合度</li>
<li>业务经理评估模型背后的方法、假设</li>
<li>其他利益不相关部门建议</li>
</ul>
</li>
<li>模型的业务决策报表应清晰易懂<ul>
<li>决策者和建模者知识背景可能不同</li>
<li>需要包含足够的输入、输出示例，充分展示模型各个维度</li>
</ul>
</li>
</ul>
<h4 id="Model-Validation"><a href="#Model-Validation" class="headerlink" title="Model Validation"></a><em>Model Validation</em></h4><ul>
<li>模型验证须由专业、独立的模型验证团队执行<ul>
<li>有动力</li>
<li>有胜任力</li>
<li>有影响力</li>
</ul>
</li>
<li>验证范围须包括模型所有组件<ul>
<li>输入</li>
<li>处理</li>
<li>报告</li>
</ul>
</li>
<li>验证的严格性、复杂性应与以下相适应<ul>
<li>模型使用量</li>
<li>模型复杂性</li>
<li>模型重要性</li>
<li>业务规模和复杂性</li>
</ul>
</li>
</ul>
<h5 id="模型验证分类"><a href="#模型验证分类" class="headerlink" title="模型验证分类"></a>模型验证分类</h5><ul>
<li><p><em>Initial Validation</em>初始验证：首次使用前的验证</p>
<ul>
<li>根据模型的缺陷选择是否接受</li>
<li>由于其他原因无法验证，应该记录在案，并通过其他补偿性
控制减轻模型不确定性</li>
</ul>
</li>
<li><p><em>On-going Validation</em>持续验证：模型投入使用后持续进行的
验证</p>
<ul>
<li>跟踪已知问题并识别任何新的问题</li>
<li>确保市场、产品、风险敞口、活动、客户、业务实践不会
造成新的模型问题</li>
</ul>
</li>
<li><p><em>Model Review</em>定期复查</p>
<ul>
<li>确定模型是否正常工作且现有的验证活动是否足够</li>
</ul>
</li>
</ul>
<h5 id="验证框架要素"><a href="#验证框架要素" class="headerlink" title="验证框架要素"></a>验证框架要素</h5><ul>
<li><p>概念健全性评估：模型设计、构造的质量</p>
<ul>
<li>审查相关文件与实践证据，确保模型设计、建造中使用的
方法、判断、变量选择有充分信息、经过仔细考虑，且与
已发表的研究和成功行业实践一致</li>
</ul>
</li>
<li><p>结果分析，比较模型输出与实际结果，分析模型性能</p>
<ul>
<li>各种量化、非量化的测试分析技术都有弱点，应根据模型
选择适当、一系列结果分析</li>
<li>量化结果有助于评估判断专家判断的质量、新旧模型性能
差距</li>
<li>结果分析应持续进行</li>
<li>除用保留样本（训练样本时间段内）分析模型性能外，还
需要使用训练样本时间段外样本进行<em>back-testing</em></li>
</ul>
</li>
<li><p>敏感性分析，检查模型的稳定性、鲁棒性</p>
</li>
</ul>
<h4 id="Model-Monitoring"><a href="#Model-Monitoring" class="headerlink" title="Model Monitoring"></a><em>Model Monitoring</em></h4><ul>
<li><p>模型监控频率应与模型性质、新数据或建模方法的可用性，涉及
的风险程度相匹配</p>
</li>
<li><p>开发阶段发现的模型局限应在持续监控中定期评估</p>
</li>
<li><p><em>Processing Verification</em>过程检验，检查所有模型组件是否
按设计运行</p>
</li>
<li><em>Benchmarking</em>基准检验，与外部数据、模型进行比较</li>
</ul>
<h2 id="贷后管理"><a href="#贷后管理" class="headerlink" title="贷后管理"></a>贷后管理</h2><ul>
<li><p>入催：当前逾期</p>
<ul>
<li>忘记还款日逾期：轻微提醒即还款</li>
<li>习惯性逾期：轻微提醒、人工催收提醒即还款</li>
<li>资金困难，还款能力低：普遍回款率低<ul>
<li>多头借贷高负债：还款意愿低，需要较强催收策略</li>
<li>暂时失去收入能力：还款意愿不差，但出催时间较久</li>
</ul>
</li>
<li>有还款能力但不还：需较强催收策略提高还款意愿</li>
<li>欺诈：首逾，贷后没有解决办法</li>
</ul>
</li>
<li><p>出催：结清逾期账单</p>
</li>
</ul>
<h3 id="AB-Test划分客户"><a href="#AB-Test划分客户" class="headerlink" title="AB-Test划分客户"></a>AB-Test划分客户</h3><ul>
<li>步骤<ul>
<li>为各类客户设置有针对性的特别催收策略</li>
<li>结合模型、规则初步初步设置筛选条件<ul>
<li>筛选出该类型客户</li>
<li>将该类型客户分群A、B组</li>
</ul>
</li>
<li>在A组应用一般催收策略、在B组应用针对性策略，比较策略
出催效果<ul>
<li>针对性策略确定情况下，评估客户筛选条件</li>
<li>客户筛选条件给定的条件下，评估针对性策略</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="M1客户"><a href="#M1客户" class="headerlink" title="M1客户"></a>M1客户</h3><ul>
<li><p>对大部分公司的客群而言，M1阶段出催概率最大</p>
<ul>
<li>此阶段较为重要，可设置多个模型重点学习不同客群规律</li>
<li>对不同客群施行不同催收策略，提高出催成功率</li>
</ul>
</li>
<li><p>缓催响应人群：出于遗忘造成的逾期</p>
<ul>
<li>在较短的缓催期内，简单的催收动作、或不催收即出催，
降低人力成本<ul>
<li>不催</li>
<li>短信提醒</li>
<li>邮件提醒</li>
<li>机器人催收</li>
</ul>
</li>
<li>对缓冲人群内部，可以通过不断<em>AB-Test</em>细分缓催人群<ul>
<li>在不同时间段设置不同缓催方式</li>
<li>为不同人群设置不同缓催方式</li>
</ul>
</li>
</ul>
</li>
<li><p>非缓催人群</p>
<ul>
<li>按出催难易程度，区分为普通案件、专家案件（难催用户）<ul>
<li>难催客户入催早期还款概率远高于后期，在入催初期
即交由经验丰富</li>
</ul>
</li>
<li>对还款能力、还款意愿分析，应用不同话术和催收策略<ul>
<li>还款能力、还款意愿分析主要是根据特征变量设置</li>
<li>对还款能力差而还款意愿强的客户，可通过延期等方式
提升用户体验</li>
<li>对还款意愿弱的客户，通过催收动作提高还款意愿</li>
</ul>
</li>
<li>对催收敏感程度分析<ul>
<li>对催收动作敏感的人群，即催收动作越强，还款概率
越高，可以加强催收频率</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="/imgs/rc_collection_m1.png" alt="rc_collection_m1"></p>
<h3 id="M2-客户"><a href="#M2-客户" class="headerlink" title="M2+客户"></a>M2+客户</h3><ul>
<li>M2+客户催出概率较低<ul>
<li>若无特殊原因影响，发生过M2+用户需要重点关注<ul>
<li>委外处理会损失资金</li>
<li>通过模型预测更易出催的客户，精细化人力管理</li>
</ul>
</li>
<li>为精细化催收可以构建多个阶段模型<ul>
<li>样本充足的情况下可以分别构建M2、M3模型</li>
<li>样本不够时，则可以构建M2+模型，不断积累决策、
建模样本</li>
</ul>
</li>
<li>分析出催难易程度、催出敏感程度不同的客群，施行不同
催收策略</li>
</ul>
</li>
</ul>
<p><img src="/imgs/rc_collection_m2+.png" alt="rc_collection_m2+"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-01-11T00:44:39.000Z" title="1/11/2021, 8:44:39 AM">2021-01-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-07-16T08:19:01.000Z" title="7/16/2021, 4:19:01 PM">2021-07-16</time></span><span class="level-item"><a class="link-muted" href="/categories/ML-Specification/">ML Specification</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/FinTech/">FinTech</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/FinTech/Risk-Control/">Risk Control</a></span><span class="level-item">32 minutes read (About 4742 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/ML-Specification/FinTech/Risk-Control/data_analysis.html">风控中数据分析</a></h1><div class="content"><h2 id="数据质量"><a href="#数据质量" class="headerlink" title="数据质量"></a>数据质量</h2><h3 id="特征数据挖掘"><a href="#特征数据挖掘" class="headerlink" title="特征数据挖掘"></a>特征数据挖掘</h3><ul>
<li>确定分析目标</li>
<li>假设分析<ul>
<li>对问题提出可能的假设</li>
<li>评估假设的分析过程</li>
</ul>
</li>
<li>特征获取、关联分析<ul>
<li>找出信息片段之间直接、间接联系</li>
<li>已知信息片段，寻找直接、间接联系的信息片段</li>
</ul>
</li>
<li>假设验证、模式归纳<ul>
<li>根据分析结论评估假设</li>
<li>归纳规律特点</li>
</ul>
</li>
</ul>
<h3 id="统计类特征构造"><a href="#统计类特征构造" class="headerlink" title="统计类特征构造"></a>统计类特征构造</h3><ul>
<li><p><em>RFM</em> 特征框架思想是构造统计类特征的基础</p>
<ul>
<li><em>Recency</em>：最近一次间隔</li>
<li><em>Frequency</em>：最近一段时间次数</li>
<li><em>Monetary</em>：最近一段时间金额</li>
</ul>
</li>
<li><p>结合业务统计、分析数据</p>
<ul>
<li>了解数据采集逻辑</li>
<li>定义观察期有效性<ul>
<li>不同用户的数据厚薄程度（实际观察期长短）可能不同</li>
</ul>
</li>
</ul>
</li>
<li><p>统计类特征构造方式</p>
<ul>
<li>数量统计类特征</li>
<li>占比统计类特征<ul>
<li>去除量纲影响</li>
<li>衡量用户行为偏好：时间偏好、类别偏好</li>
</ul>
</li>
<li>趋势统计类特征<ul>
<li>一般通过斜率衡量变化趋势</li>
</ul>
</li>
<li>稳定性衍生特征<ul>
<li>变异系数</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="特征变量评估"><a href="#特征变量评估" class="headerlink" title="特征变量评估"></a>特征变量评估</h3><ul>
<li><em>compliant</em> 合规性<ul>
<li>法律允许</li>
<li>来源可靠</li>
</ul>
</li>
<li><em>stable</em> 稳定性<ul>
<li>数据采集稳定性</li>
<li>特征变量稳定性<ul>
<li>数据源采集稳定是变量稳定性的基本前提</li>
<li>变量是模型的基础，数据不稳定必然导致模型稳定性差</li>
</ul>
</li>
</ul>
</li>
<li><em>available</em> 可得性<ul>
<li>数据未来是否可以继续采集、计算</li>
<li>涉及产品设计流程、用户授权协议、合规需求、模型应用环节<ul>
<li>业务流程更改导致埋点数据弃用、数据采集后移</li>
<li>RFM特征时间窗口支持</li>
</ul>
</li>
</ul>
</li>
<li><em>interpretable</em> 可解释性<ul>
<li>数据是否具有明确、清晰的业务含义，便于理解</li>
</ul>
</li>
<li><em>logical</em> 逻辑性<ul>
<li>不容易绕过，逻辑上应该被采用</li>
</ul>
</li>
</ul>
<h4 id="外部数据业务指标"><a href="#外部数据业务指标" class="headerlink" title="外部数据业务指标"></a>外部数据业务指标</h4><blockquote>
<ul>
<li>外部数据：三方平台根据自身业务场景所积累的数据，经脱敏
  加工后对外输出，主要包括上述的信贷类数据、消费类数据</li>
</ul>
</blockquote>
<ul>
<li>性价比<ul>
<li>结合技术、业务效果、数据价格，综合计算性价比</li>
<li>计价方式</li>
</ul>
</li>
<li>覆盖范围<ul>
<li>覆盖率</li>
<li>查得率：能匹配用户数/总用户数</li>
</ul>
</li>
</ul>
<h4 id="名单类数据"><a href="#名单类数据" class="headerlink" title="名单类数据"></a>名单类数据</h4><ul>
<li>自身效果评估<ul>
<li>混淆矩阵<ul>
<li><em>TPR</em>、<em>FPR</em></li>
<li>准确率/误拒率</li>
</ul>
</li>
<li>提升度<ul>
<li>拒绝样本中坏样本提升度</li>
<li>通过样本中好样本提升度</li>
</ul>
</li>
<li>通过率、拒绝率</li>
</ul>
</li>
<li>对比/增量效果评估：和其他数据源比较<ul>
<li>有效差异率：查得命中 / 其他通过且为坏样本</li>
<li>无效差异率：查得命中 / 其他拒绝</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>线下带标签场景的评估</li>
</ul>
</blockquote>
<h4 id="数据描述"><a href="#数据描述" class="headerlink" title="数据描述"></a>数据描述</h4><ul>
<li><em>Exploratory Data Distribution</em> 数据分布<ul>
<li>样本与总体分布应大致相同，则样本分布应保持稳定，因此
各特征统计值更应保持稳定</li>
<li>按照自然月、特征维度，分析特征统计值变动</li>
</ul>
</li>
<li><em>Missing Rate</em> 缺失率<ul>
<li>缺失成因：随机缺失、系统性缺失</li>
<li>缺失变动：特征缺失率持续升高，则预期未来数据采集率
下降</li>
</ul>
</li>
<li><em>Unique Value</em><ul>
<li>若某固定值占比过高，则变量区别度往往很低</li>
</ul>
</li>
<li>特殊值检查<ul>
<li>缺失值如何表示</li>
<li>零值的业务含义</li>
</ul>
</li>
</ul>
<h4 id="稳定性"><a href="#稳定性" class="headerlink" title="稳定性"></a>稳定性</h4><ul>
<li><em>PSI</em>：测试集、训练集间<ul>
<li>比较训练集、测试集变量的波动性</li>
<li>无法反应细节原因，还需要 <em>EDD</em> 上分析</li>
</ul>
</li>
</ul>
<h4 id="信息量"><a href="#信息量" class="headerlink" title="信息量"></a>信息量</h4><ul>
<li><em>Coefficient of Variation</em> 变异系数<ul>
<li>过小则区分度差</li>
<li>过大可能不稳定</li>
</ul>
</li>
<li><em>IV</em> 值<ul>
<li>评估变量预测能力</li>
<li>IV值过高时注意信息泄露问题</li>
</ul>
</li>
<li><em>RF/XGB</em> 特征重要性<ul>
<li>适合快速筛选特征</li>
<li>此重要性只有<strong>全局可解释性</strong>，无法对单个案例做出解释</li>
</ul>
</li>
</ul>
<h4 id="信息重复"><a href="#信息重复" class="headerlink" title="信息重复"></a>信息重复</h4><ul>
<li><em>Variable Cluster</em> 变量聚类：评估聚类意义上变量的“接近”程度<ul>
<li>层次聚类</li>
</ul>
</li>
<li><em>Linear Correlation</em> 线性相关性：评估变量间的线性相关性<ul>
<li><em>Pearson Correlation Coefficient</em></li>
<li>变量若通过WOE方式参与建模，则可以使用WOE值计算相关系数</li>
</ul>
</li>
<li><em>Multicollinearity</em> 多重共线性<ul>
<li><em>VIF</em></li>
</ul>
</li>
<li>变量显著性<ul>
<li><em>p-value</em></li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>建模（线性）中应该避免是<strong>参与建模</strong>的变量之间过强的线性相关，所以应该检查的是<strong>参与建模</strong>变量之间的线性相关</li>
<li>变量衍生值、原始值相关性不一致是衍生非线性导致，不应减弱使用衍生值变量检查的合理性</li>
</ul>
</blockquote>
<h3 id="样本数据质量"><a href="#样本数据质量" class="headerlink" title="样本数据质量"></a>样本数据质量</h3><ul>
<li>代表性（狭义）<ul>
<li>数理统计最基本逻辑链是通过样本推断总体，因此样本对总体代表性决定推断上限</li>
<li>根据标目标客群、好坏比例采样、赋权<ul>
<li>简单随机抽样，保持内部真实客群、好坏比例</li>
<li>客群分层抽样，适应不同客群</li>
<li>好坏不等比抽样，建模之后再按权重还原，充分捕捉
坏样本特征</li>
</ul>
</li>
</ul>
</li>
<li>稳定性<ul>
<li>可用各 <em>Vintage</em> 内坏占比、<em>lift</em> 值、<em>odds</em> 等指标 <em>PSI</em> 衡量</li>
<li>样本稳定性决定推断结果稳定性</li>
<li>样本客群应该足够稳定，受节假日、周期影响小</li>
</ul>
</li>
<li>连续性<ul>
<li>样本时间连续便于建模中划分训练集、测试集（避免数据穿越）</li>
</ul>
</li>
</ul>
<h3 id="特征分类"><a href="#特征分类" class="headerlink" title="特征分类"></a>特征分类</h3><ul>
<li><p>还款能力</p>
<ul>
<li>收入：自填、三方</li>
<li>负债：内部负债、外部负债、多头借贷</li>
<li>学历：自填、三方</li>
</ul>
</li>
<li><p>还款意愿</p>
<ul>
<li>申贷行为：申贷记录、贷前贷后申贷行为变化</li>
<li>履约行为：还款记录、逾期记录</li>
<li>催记行为：催收记录</li>
</ul>
</li>
</ul>
<h2 id="贷前数据"><a href="#贷前数据" class="headerlink" title="贷前数据"></a>贷前数据</h2><ul>
<li>主动数据/表填信息：客户主动提供</li>
<li>被动数据：主动采集</li>
</ul>
<h3 id="资质、标签类数据"><a href="#资质、标签类数据" class="headerlink" title="资质、标签类数据"></a>资质、标签类数据</h3><ul>
<li><p>客观数据：无第三方欺诈情况下可信</p>
<ul>
<li>性别</li>
<li>年龄</li>
<li>身份证号</li>
<li>手机号</li>
<li>手机号在多少个平台用户的通讯录中有存储</li>
<li>手机号归属地</li>
<li>户籍地址</li>
<li>户籍地址是否来自非城市：除一线城市外，用身份证
地址是否包含“村”判断</li>
<li>银行卡号</li>
<li>银行卡发卡行</li>
<li>签发机关</li>
</ul>
</li>
<li><p>主观数据：不可信，可对这部分数据做交叉验证，检查是否前后矛盾</p>
<ul>
<li>紧急联系人号码</li>
<li>紧急联系人消息</li>
<li>紧急联系人是否为平台用户</li>
<li>学历</li>
<li>工作</li>
<li>月收入</li>
<li>公司</li>
<li>负债</li>
<li>地址</li>
<li>紧急联系人手机号归属地是否和账户手机号归属地一致</li>
<li>手机联系人手机号归属地是否和申请人户籍地一致</li>
</ul>
</li>
</ul>
<h3 id="信贷类数据"><a href="#信贷类数据" class="headerlink" title="信贷类数据"></a>信贷类数据</h3><ul>
<li>人行征信报告</li>
<li>三方征信数据：通过各机构贷前审批、贷后管理等记录<ul>
<li>收入数据</li>
<li>负债数据<ul>
<li>多头负债</li>
<li>共债</li>
</ul>
</li>
<li>多头借贷数据</li>
<li>黑名单</li>
<li>信用评分</li>
<li>原始数据（极少）</li>
</ul>
</li>
</ul>
<h3 id="生活行为类数据"><a href="#生活行为类数据" class="headerlink" title="生活行为类数据"></a>生活行为类数据</h3><ul>
<li>消费行为：资金用途，是否专款专用、不良用途<ul>
<li>信用卡、借记卡账单和流水</li>
<li>电商消费记录数据</li>
</ul>
</li>
<li>收入能力：收入直接影响还款能力<ul>
<li>流动资产：工资、公积金</li>
<li>固定资产</li>
</ul>
</li>
<li>出行行为数据</li>
<li>短信通道：识别内容，提取放款、逾期、催收等特征</li>
<li>支付通道：通过支付代扣记录，提取用户收入、支出等
现金流</li>
<li>手机输入法：识别内容，提取全方位信息</li>
</ul>
<h3 id="设备行为类数据-埋点数据"><a href="#设备行为类数据-埋点数据" class="headerlink" title="设备行为类数据/埋点数据"></a>设备行为类数据/埋点数据</h3><ul>
<li><p>埋点数据量庞大而杂乱</p>
<ul>
<li>需要结合业务逻辑分析，从账户角度思考，挖掘有用的特征</li>
</ul>
</li>
<li><p>行为类数据为弱金融属性数据，多用于交叉验证</p>
<ul>
<li>GPS与手机号归属地一致</li>
<li>IP与GPS所在城市是否一致</li>
<li>IP与手机号归属地是否一致</li>
<li>工作时间的LBS是否与公司地址一致</li>
<li>非工作时间的LBS是否与家庭地址一致</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>埋点数据：在有需要的位置采集相应的信息</li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/53812343">https://zhuanlan.zhihu.com/p/53812343</a></li>
</ul>
</blockquote>
<h4 id="设备特征"><a href="#设备特征" class="headerlink" title="设备特征"></a>设备特征</h4><ul>
<li><p>设备恒定特征</p>
<ul>
<li>是否root</li>
<li>是否hook</li>
<li>是否为实体手机</li>
<li>是否为一键新机</li>
<li>是否为二手手机：欺诈更倾向于使用二手手机<ul>
<li>系统文件</li>
<li>是否恢复出厂设置</li>
</ul>
</li>
<li>品牌</li>
<li>价格</li>
<li>操作系统</li>
<li>设备迁移方向</li>
</ul>
</li>
<li><p>设备易变特征</p>
<ul>
<li>传感器参数：在互联网反欺诈中，常用于侦测非实体手机，
而金融场景中更多是真机<ul>
<li>角度传感器</li>
<li>压力传感器</li>
</ul>
</li>
<li>电压、电量：手机电压、电量呈上升趋势，表示账户资金
需求更急迫</li>
</ul>
</li>
</ul>
<h4 id="行为数据"><a href="#行为数据" class="headerlink" title="行为数据"></a>行为数据</h4><ul>
<li><p>活动轨迹：取决于埋点的精细程度</p>
<ul>
<li>夜间申请</li>
<li>User-agent</li>
<li>点击次数<ul>
<li>申请前次数低于大盘：账户对产品了解，意图明显</li>
<li>授信后点击次数过高：账户对产品有犹豫</li>
</ul>
</li>
<li>激活+粘贴<ul>
<li>正常申请流程中较少存在中途退出申请的必要</li>
<li>而中介更可以多次切换应用，复制粘贴</li>
</ul>
</li>
<li>截图<ul>
<li>中介更有可能截图制作教程、展示流程等</li>
</ul>
</li>
<li>时间间隔：更适合作为欺诈模型参数<ul>
<li>注册到申请</li>
<li>登录到申请</li>
<li>各申请步骤</li>
<li>申请到完成</li>
<li>授信到用信</li>
<li>上次申请与本次申请时间间隔</li>
</ul>
</li>
<li>切换设备登陆</li>
<li>身份证提交次数</li>
</ul>
</li>
<li><p>内容偏好</p>
</li>
</ul>
<h4 id="环境信息"><a href="#环境信息" class="headerlink" title="环境信息"></a>环境信息</h4><ul>
<li>LBS信息：可以提高观察粒度保证容错率<ul>
<li>GPS所在城市</li>
<li>LBS是否在非城市</li>
<li>同LBS是否多个申请</li>
<li>LBS周围是否多个申请</li>
</ul>
</li>
<li>网络信息<ul>
<li>网络类型：Wifi/4g/3g</li>
<li>相同Wifi MAC的申请人数</li>
<li>Wifi名称是否命中风险关键词</li>
</ul>
</li>
<li>IP地址<ul>
<li>相同IP的申请人数</li>
<li>IP所在城市</li>
<li>IP是否来自数据中心</li>
</ul>
</li>
</ul>
<h2 id="贷中、贷后指标"><a href="#贷中、贷后指标" class="headerlink" title="贷中、贷后指标"></a>贷中、贷后指标</h2><h3 id="贷中数据维度"><a href="#贷中数据维度" class="headerlink" title="贷中数据维度"></a>贷中数据维度</h3><ul>
<li>内部信贷行为数据<ul>
<li>申贷行为<ul>
<li>历史申贷记录</li>
<li>贷前、贷后申贷行为</li>
</ul>
</li>
<li>还款<ul>
<li>分期期数</li>
<li>首期逾期天数</li>
<li>当前月正常拆分扣款总次数</li>
<li>当前3个月内还款最大金额</li>
<li>历史最大逾期天数</li>
<li>首次成功还款时间距离当前时间</li>
</ul>
</li>
<li>催收<ul>
<li>催收记录</li>
</ul>
</li>
<li>履约历史<ul>
<li>提前还款：资金充足、重视信用记录</li>
<li>习惯性逾期：手头紧张、不够重视信用记录</li>
</ul>
</li>
</ul>
</li>
<li>活跃行为<ul>
<li>失联</li>
<li>用户登录</li>
</ul>
</li>
<li>账户特征<ul>
<li>授信额度使用率</li>
<li>代偿余额</li>
</ul>
</li>
</ul>
<h3 id="时间窗口"><a href="#时间窗口" class="headerlink" title="时间窗口"></a>时间窗口</h3><p><img src="/imgs/observation_and_performance.png" alt="obeservation_and_performance"></p>
<ul>
<li><p><em>Observation Point</em>观察点：账户申请的时间段，该时间段内
客户可能用于建模</p>
<ul>
<li>从风控应用角度，观察点即对账户授信审核的时点，此时
能够获得所有信息只能在观察点前的观察期</li>
</ul>
</li>
<li><p><em>Observation Window</em>观察期：构造特征的事件窗口</p>
<ul>
<li>观察期选择依赖用户数据的厚薄程度，数据越厚，可提取
信息越全面、可靠</li>
</ul>
</li>
<li><p><em>Performance Window</em>表现期：定义好坏标签的时间窗口</p>
<ul>
<li>风险需通过一定时间窗口才能表现，即信贷风险具有滞后性</li>
<li>表现期越长<ul>
<li>信用风险暴露越彻底</li>
<li>也意味着观察期离当前越远，用以提取样本特征的历史
数据越陈旧，建模样本和未来样本差异越大</li>
</ul>
</li>
<li>应当选择合适的表现期以<strong>覆盖足够多的坏客户</strong></li>
</ul>
</li>
</ul>
<h4 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h4><ul>
<li><p>表现期的选择</p>
<ul>
<li>对信用卡场景的稳定客群、长期限产品，可用滚动率、账龄
分析确定表现期、好坏</li>
<li>但对小额信贷产品，实务中一般结合产品期限，沿用常用
指标，如：表现期设置为产品期限一半</li>
</ul>
</li>
<li><p>建模样本窗口选择</p>
<ul>
<li>特征覆盖度：保证数据厚薄程度相同</li>
<li>客群没有大幅变动<ul>
<li>特征</li>
<li>标签：逾期、出催等</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Month-on-Book-MOB：账龄"><a href="#Month-on-Book-MOB：账龄" class="headerlink" title="Month on Book/MOB：账龄"></a><em>Month on Book</em>/<em>MOB<N></em>：账龄</h3><ul>
<li><p>统一观察点账龄：统计信息为观察点实时信息，但会导致
订单表现期不同</p>
<ul>
<li><em>MOB0</em>：放款日至当月月底</li>
<li><em>MOB1</em>：放款后第二个完整月份</li>
<li><em>MOB2</em>：放款后第三个完整月份</li>
</ul>
<p><img src="/imgs/mob_at_a_specified_time_point.png" alt="mob_at_a_specified_time_point"></p>
</li>
<li><p>统一表现期账龄：保证订单表现期相同</p>
<ul>
<li><em>MOB1</em>：放款日开始30天</li>
<li><em>MOB2</em>：放款日开始30天至60天</li>
</ul>
<p><img src="/imgs/mob_spanning_specified_time_range.png" alt="mob_spanning_specified_time_range"></p>
</li>
</ul>
<h3 id="逾期、不良"><a href="#逾期、不良" class="headerlink" title="逾期、不良"></a>逾期、不良</h3><ul>
<li><em>Payment Delinquency</em>：逾期<ul>
<li><em>First Payment Delinquency</em>/<em>FPDx</em>：首期逾期（天数）</li>
<li><em>Current Payment Delinquency</em>/<em>CPDx</em>：当前逾期</li>
<li><em>Historical Payment Delinquency</em>/<em>HPDx</em>：历史逾期</li>
</ul>
</li>
<li><em>Day Past Due</em>/<em>DPDx</em>：逾期天数</li>
</ul>
<h4 id="逾期期数"><a href="#逾期期数" class="headerlink" title="逾期期数"></a>逾期期数</h4><ul>
<li><em>C</em>/<em>M0</em>：当前未逾期</li>
<li><em>M1</em>：DPD1 - DPD30</li>
<li><em>M6</em>：逾期151-180日</li>
<li><em>M7</em>/<em>Bad Debts</em>：逾期180日以上</li>
</ul>
<blockquote>
<ul>
<li>对信用卡场景而言，<em>M0</em>为账单日到还款日之前，而对信贷
  场景，<em>M0</em>没有对应时间段</li>
</ul>
</blockquote>
<h4 id="逾期率"><a href="#逾期率" class="headerlink" title="逾期率"></a>逾期率</h4><ul>
<li>两种计算口径<ul>
<li>逾期率 = 逾期订单数 / 总订单数</li>
<li>逾期率 = 逾期订单金额 / 总订单金额</li>
</ul>
</li>
<li>逾期口径调整<ul>
<li>逾期统计时间窗口：历史、当年</li>
<li>逾期后还上</li>
<li>担保、代偿</li>
<li>多期逾期是否计算剩余未还</li>
</ul>
</li>
<li>总数调整<ul>
<li>统计时间窗口：历史、当年</li>
<li>已发放还是余额</li>
</ul>
</li>
<li>客观反映风控、资产质量的观察期选择<ul>
<li><em>Coincidental Delinquency</em>：固定观察时点，以截至
观察时点前逾期金额、余额计算</li>
<li><em>Lagged Deliquency</em>：按照账龄分析方法，将各月份
逾期金额、金额计算真实逾期率</li>
</ul>
</li>
</ul>
<h4 id="不良率"><a href="#不良率" class="headerlink" title="不良率"></a>不良率</h4><ul>
<li>不良率 = （次级+可疑+损失）/ 总<ul>
<li>次级、可疑、损失在银行内有明确规定，但不完全按照逾期
天数划分</li>
<li>同体系内内比较不良可行，但和不同体系间没有可比较性</li>
</ul>
</li>
</ul>
<h4 id="Expected-Loss"><a href="#Expected-Loss" class="headerlink" title="Expected Loss"></a><em>Expected Loss</em></h4><script type="math/tex; mode=display">
EL = PD * LGD * EAD</script><ul>
<li><p><em>Expected Loss</em>预期损失</p>
</li>
<li><p><em>Probabilty of Default</em>违约概率</p>
<ul>
<li>资产质量越差，违约概率越高</li>
<li>可以把对应逾期状态至呆账状态，各状态间迁移率链式相乘
得到违约概率</li>
</ul>
</li>
<li><p><em>Loss Given Default</em>违约损失率：账户违约后，能够回收的
本金比例</p>
</li>
<li><p><em>Bad Debt Reserve</em>坏账准备金/拨备</p>
<ul>
<li>把未偿清金额按照一定准备金比例储备，用于覆盖预期的
未来呆账损失</li>
<li>应该等于预期损失</li>
</ul>
</li>
</ul>
<h2 id="资产质量分析"><a href="#资产质量分析" class="headerlink" title="资产质量分析"></a>资产质量分析</h2><blockquote>
<ul>
<li>资产质量：根据逾期天数将资产划分为不同等级</li>
</ul>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>账龄分析</th>
<th>滚动率分析</th>
<th>迁移率分析</th>
</tr>
</thead>
<tbody>
<tr>
<td>观察点</td>
<td>多个观察点</td>
<td>单个观察点</td>
<td>多个观察点</td>
</tr>
<tr>
<td>观察窗口</td>
<td>观察点后各期</td>
<td>观察点前后一段期限</td>
<td>观察点后各期</td>
</tr>
<tr>
<td>工具</td>
<td>Vintage曲线</td>
<td>迁移矩阵</td>
<td>迁移率</td>
</tr>
<tr>
<td>分析要素</td>
<td>各观察点、各期逾期情况</td>
<td>各逾期状态间迁移情况</td>
<td>各期、各逾期状态下沉情况</td>
</tr>
</tbody>
</table>
</div>
<h3 id="Vintage-Analysis"><a href="#Vintage-Analysis" class="headerlink" title="Vintage Analysis"></a>Vintage Analysis</h3><p>账龄分析：对不同时点资产分别跟踪，按照账龄长短对齐后对比，
分析不同时点贷款贷后质量</p>
<p><img src="/imgs/vintage_analysis_sample.png" alt="vintage_analysis_sample"></p>
<ul>
<li>用途<ul>
<li>确定账户成熟期/稳定期<ul>
<li>以逾期率趋于稳定所需时间作为判断客户好、坏区分
所需时间</li>
<li>辅助定义表现期/成熟期</li>
</ul>
</li>
<li>确定资产质量<ul>
<li>以曲线平缓处对应逾期率衡量资产质量</li>
</ul>
</li>
<li>分析变化规律：分析逾期率变化情况<ul>
<li>前几期逾期率上升快：短期风险未能控制，欺诈风险高</li>
<li>曲线一直上升：信用风险识别能差</li>
</ul>
</li>
<li>分析影响因素（资产质量），指导风控策略调整<ul>
<li>风控策略收紧放松</li>
<li>客群变化</li>
<li>市场环境</li>
<li>政策法规等</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li><em>vintage</em>起源于葡萄酒品质分析，<em>vintage</em>即指代葡萄酒的
  批次标签，每年对各批次抽样、记录即得到<em>vintage</em>曲线</li>
</ul>
</blockquote>
<h3 id="Roll-Rate-Analysis"><a href="#Roll-Rate-Analysis" class="headerlink" title="Roll Rate Analysis"></a>Roll Rate Analysis</h3><p>滚动率分析：利用观察期、表现期违约程度的状态转移矩阵分析
违约程度变化情况</p>
<p><img src="/imgs/roll_rate_analysis_transition_matrix.png" alt="roll_rate_analysis_transition_matrix"></p>
<ul>
<li><p>滚动率分析步骤</p>
<ul>
<li>准备<ul>
<li>确定数据源：一般为还款计划表</li>
<li>定义逾期状态</li>
</ul>
</li>
<li>统计观察期：以观察点为截至时间，统计客户在观察期最长
逾期期数，并据此对用户分级C、M1、M2等</li>
<li>统计表现期：以观察点起始，统计客户在表现期内最长逾期
数，并据此对用户分级C、M1、M2等</li>
<li>根据以上数据绘制列联表、计算频率</li>
<li>为排除观察点选择影响，选择多个观察点重复以上</li>
</ul>
</li>
<li><p>滚动率分析用途</p>
<ul>
<li>分析客户好坏程度、变化情况，确定客户好坏界限</li>
</ul>
</li>
</ul>
<h3 id="Flow-Rate-Analysis"><a href="#Flow-Rate-Analysis" class="headerlink" title="Flow Rate Analysis"></a>Flow Rate Analysis</h3><p>迁移率分析：利用违约程度变化计算迁移率，分析违约程度变化规律</p>
<p><img src="/imgs/flow_rate_analysis.png" alt="flow_rate_analysis"></p>
<ul>
<li><p><em>Flow Rate</em>迁移率：资产等级<strong>下滑</strong>的比例</p>
<ul>
<li>迁移率 = 前等级逾期金额到下一等级逾期金额的转化率<ul>
<li><em>M0-M1</em> = 当月进入M1余额 / 上月末M0余额</li>
</ul>
</li>
</ul>
</li>
<li><p>核心假设</p>
<ul>
<li>处于某一逾期状态的账户，一个月之后，必然从良为非逾期
账户，或恶化为下一级逾期账户</li>
<li>状态不会有跃迁，所以一期仅有一组下沉迁移率</li>
</ul>
</li>
<li><p>迁移率分析步骤</p>
<ul>
<li>准备<ul>
<li>确定数据源：一般为还款计划表</li>
<li>定义逾期状态</li>
</ul>
</li>
<li>计算各月份、各逾期状态之间迁移率</li>
<li>计算不同月份平均迁移率</li>
<li>根据平均迁移率和不良资产回收率，计算净坏账损失率</li>
</ul>
</li>
<li><p>作用</p>
<ul>
<li>展示账户整个生命周的变化轨迹<ul>
<li>预测未来坏账损失：各级迁移率乘积得到最终损失率</li>
<li>计算坏账计提标准、资产拨备</li>
</ul>
</li>
<li>观察迁移率发展轨迹<ul>
<li>分析贷款催收率、催收力度</li>
<li>监控坏账发展倾向和催收效果</li>
</ul>
</li>
<li>确定好坏客户标准<ul>
<li>即选择迁移率较高的状态作为划分点</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-08-10T11:37:47.000Z" title="8/10/2020, 7:37:47 PM">2020-08-10</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-07-16T08:26:34.000Z" title="7/16/2021, 4:26:34 PM">2021-07-16</time></span><span class="level-item"><a class="link-muted" href="/categories/ML-Specification/">ML Specification</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/FinTech/">FinTech</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/FinTech/Risk-Control/">Risk Control</a></span><span class="level-item">23 minutes read (About 3463 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/ML-Specification/FinTech/Risk-Control/rc_models.html">评分卡模型</a></h1><div class="content"><h2 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h2><ul>
<li><p>模型是策略的工具，策略包含模型，是模型的延伸</p>
<ul>
<li>相较于专家规则，机器学习模型<ul>
<li>允许加入更多特征维度，描述更加全面</li>
<li>上限更高、下限更低</li>
<li>涉及更多维度特征时，维护更方便</li>
</ul>
</li>
<li>机器学习模型和专家规则并非相互替代，更多的是串联</li>
</ul>
</li>
<li><p>业务问题转换为带解决数学问题</p>
<ul>
<li>尽量将业务问题转换为更容易解决分类问题而不是回归问题</li>
<li>数学问题应尽量贴近业务：评估指标好不等于业务价值高<ul>
<li>远离业务问题的训练出模型，其线下评估效果好也不意味着上线效果好，如：针对客户而不是订单评价</li>
<li>影响客户体验，如：客户等待时间预估偏低而不是偏高</li>
</ul>
</li>
</ul>
</li>
<li><p>样本构造</p>
<ul>
<li>标签定义<ul>
<li>尽量为客观事实（是否、数量），而非主观判断（等级）</li>
<li>样本粒度贴合实际、业务（订单粒度、客户粒度）</li>
</ul>
</li>
<li>样本数量<ul>
<li>二分类场景：正例样本大于 2000，占比超过 1%</li>
</ul>
</li>
<li>采样<ul>
<li>尽量不进行人工采样，保持训练数据正、负例比例和真实情况对齐</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="传统评分卡"><a href="#传统评分卡" class="headerlink" title="传统评分卡"></a>传统评分卡</h3><div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>评分卡</th>
<th>复杂学习</th>
</tr>
</thead>
<tbody>
<tr>
<td>特征筛选</td>
<td>需筛选强特征，依赖业务经验</td>
<td>支持弱特征入模</td>
</tr>
<tr>
<td>特征处理</td>
<td><em>WOE</em> 分箱，稳定性好</td>
<td></td>
</tr>
<tr>
<td>非线性</td>
<td>仅 <em>WOE</em> 分箱提供非线性，解释性好</td>
<td>非线性充分挖掘数据信息，解释性差</td>
</tr>
<tr>
<td>复杂度</td>
<td>模型简单，泛化性好，样本需求小</td>
<td>模型复杂，表达能力强，样本少时容易过拟合</td>
</tr>
<tr>
<td>调参</td>
<td>超参少</td>
<td>调参难度大</td>
</tr>
<tr>
<td>模型提升方向</td>
<td>分（样本）群建模</td>
<td><em>Stacking</em> 结合评分卡</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><p>信用评分卡模型：利用模型将账户的属性特征按取值分组、并赋予一定分数，对账户进行信用评分</p>
<ul>
<li>最常见的金融风控手段之一，用于决定是否给予授信以及授信的额度和利率</li>
<li>常用逻辑回归作为模型</li>
<li>应用形式为查分组得分表、得分加和<ul>
<li>变量总是被分组，同组内得分相同</li>
<li>用户属性变化不足以跨越箱边界，则得分不改变</li>
</ul>
</li>
</ul>
</li>
<li><p>评分卡更关注得分相对值，即得分变动情况，评分绝对值含义意义不大</p>
<ul>
<li>常用 <em>LR</em> 中 <em>sigmoid</em> 函数内线性函数结果作为初始得分<ul>
<li>根据 <em>LR</em> 意义，此时得分可以映射为账户的违约概率</li>
</ul>
</li>
<li>为美观，可能会对得分做线性变换<ul>
<li>常对各特征得分做放缩、对账户得分和做平移，此时放缩比例除以 $ln2$ 即为 <em>PDO</em>
（对特征得分同时做等比例放缩、平移可行但蠢）</li>
<li>线性变换后得分绝对值无意义，特征重要性可用特征各分组得分差距衡量</li>
</ul>
</li>
</ul>
</li>
<li><p>评分卡在不同业务阶段体现的方式、功能不一样，按照借贷用户借贷时间可以分为</p>
<ul>
<li>申请评分卡 <em>Application Score Card</em>：贷前申请评分卡</li>
<li>行为评分卡 <em>Behavior Score Card</em>：贷中行为评分卡</li>
<li>催收评分卡 <em>Collection Score Card</em>：贷后催收评分卡</li>
</ul>
</li>
</ul>
<h3 id="Stacking-评分卡"><a href="#Stacking-评分卡" class="headerlink" title="Stacking 评分卡"></a><em>Stacking</em> 评分卡</h3><blockquote>
<ul>
<li>考虑将评分卡、机器学习模型结合，使用机器学习模型构建特征，在此基础之上建立评分卡模型</li>
</ul>
</blockquote>
<ul>
<li><p><em>Stacking</em> 思想下的模型架构</p>
<ul>
<li>原始数据域</li>
<li>数据挖掘、特征工程</li>
<li>数据域特征子模型</li>
<li>评分卡模型</li>
</ul>
</li>
<li><p>架构优势</p>
<ul>
<li>可解释性：保留在数据域粒度上的可解释性</li>
<li>信息提取：子模型提取弱特征信息，降低特征工程门槛</li>
<li>维度多样性：特征子模型机制，降低特征筛选必要性，保证各数据域都有特征入模</li>
<li>模块化：具有良好扩展性，支持子模型替换、删除</li>
<li>并行化：各数据域特征子模型专业、独立负责，提高效率</li>
</ul>
</li>
<li><p>架构劣势</p>
<ul>
<li>牺牲部分可解释性：若策略、模型使用相同变量，策略阈值调整对模型影响难以估计<ul>
<li>控制入模变量数目，便于快速定位</li>
<li>利用 <em>SHAP</em>、<em>LIME</em> 等工具解释模型</li>
</ul>
</li>
<li>增加上线、维护成本：需要上线多个模型，且对多个架构多个层次都进行监控</li>
<li>协同建模增加对接成本</li>
<li>分数据域特征子模型建模，容易造成数据孤岛，无法捕捉不同数据域间的数据联系<ul>
<li>跨数据域构造特征，构建跨数据域子模型</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="B-卡-Behavior-Scoring"><a href="#B-卡-Behavior-Scoring" class="headerlink" title="B 卡 - Behavior Scoring"></a><em>B</em> 卡 - <em>Behavior Scoring</em></h3><p>贷中风控：根据借款人放贷后行为表现，预测未来逾期风险</p>
<ul>
<li><p><em>B</em> 卡用于动态监控放款后风险变化</p>
<ul>
<li>贷前阶段对借款人履约行为掌握少，且为静态数据</li>
<li>一般无需实时，离线T+1计算即可</li>
</ul>
</li>
<li><p><em>B</em> 卡适合的信贷场景</p>
<ul>
<li>还款周期长<ul>
<li>长周期场景用户风险变化可能性大，与 <em>A</em> 卡形成区分</li>
<li>引入贷中客户信息、还款履约行为，更准确识别客户逾期风险</li>
</ul>
</li>
<li>循环授信<ul>
<li>贷前阶段，无法很好识别客户风险，设置初始额度</li>
<li>贷中与客户更多交互之后，可根据获取的贷中行为信息进行提额、降额操作</li>
</ul>
</li>
</ul>
</li>
<li><p><em>B</em> 卡区分度一般很高</p>
<ul>
<li>除贷前数据之外，还可以使用账户的贷中表现数据</li>
<li>特别的，不考虑排序性的情况下，使用是否逾期作为划分依据也能得到较高的 <em>TPR-FPR</em>，给出 <em>KS</em> 的下限</li>
</ul>
</li>
<li><p><em>B</em> 卡建模主要基于老客</p>
<ul>
<li>老客有足够长的申贷、还款记录</li>
<li>新、老客定义口径<ul>
<li>新客：无历史结清订单</li>
<li>老客：至少有1笔结清订单</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="C-卡-Collection-Scoring"><a href="#C-卡-Collection-Scoring" class="headerlink" title="C 卡 - Collection Scoring"></a><em>C</em> 卡 - <em>Collection Scoring</em></h3><p>贷后催收评分卡：当前状态为逾期情况下，预测未来出催可能性</p>
<ul>
<li><p>现阶段业界对 <em>C</em> 卡不够重视</p>
<ul>
<li>贷前风控最重要，优秀的贷前带来更容易的贷中、贷后</li>
<li>催收效果和人员更相关，而逾期发生之后往往会委外</li>
<li>随信贷行业的发展，贷后催收会趋向于精细化、专业化的发展，模型+策略的优化愈发重要</li>
</ul>
</li>
<li><p>模型分群</p>
<ul>
<li>新老入催用户<ul>
<li>首次入催</li>
<li>再次入催</li>
</ul>
</li>
<li><em>MOB</em> 信息（数据厚薄）<ul>
<li>还款月份数</li>
<li>催记月份数</li>
</ul>
</li>
<li>订单详情<ul>
<li>利率</li>
<li>期限</li>
<li>金额</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="样本选择"><a href="#样本选择" class="headerlink" title="样本选择"></a>样本选择</h4><ul>
<li><p>建模样本窗口选择</p>
<ul>
<li>特征覆盖度：保证数据厚薄程度相同</li>
<li>催收动作变化：出催没有大幅度变动</li>
<li>客群变化：入催没有大幅变动</li>
</ul>
</li>
<li><p>同用户订单合案</p>
<ul>
<li>不合案：同用户多笔订单视为不同样本<ul>
<li>表现期内入催当期结清视为出催</li>
</ul>
</li>
<li>合案：同用户相近观察点入催订单合并<ul>
<li>表现期内入催当期所有账单还清视为出催</li>
<li>对发生过 <em>M2+</em> 逾期者，可将只要出催一期即视为出催</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="C-卡模型"><a href="#C-卡模型" class="headerlink" title="C 卡模型"></a><em>C</em> 卡模型</h4><blockquote>
<ul>
<li>根据模型作用时间段分类</li>
</ul>
</blockquote>
<ul>
<li><p><em>M1</em> 全量模型：预测 <em>M1</em> 阶段（逾期 30 天内）还款概率</p>
<ul>
<li>样本：所有入催样本整体<ul>
<li>若缓催期内催出用户较多，则模型主要学习了缓催样本信息，约等于缓催响应模型，对非缓催样本效果较差</li>
</ul>
</li>
<li>时间窗口<ul>
<li>观察点：还款日</li>
<li>表现期：<em>M1</em> 阶段</li>
</ul>
</li>
</ul>
</li>
<li><p>缓催响应模型：预测适合缓催人群</p>
<ul>
<li>样本：需要积累足够的缓催响应样本<ul>
<li>若有足够缓催响应样本，可以和M1全量模型同时构建</li>
<li>否则，在 <em>M1</em> 全量模型得分高（出催概率高）人群上进行 <em>AB Test</em>，积累缓催响应样本</li>
</ul>
</li>
<li>时间窗口<ul>
<li>观察点：还款日</li>
<li>表现期：缓催响应日(2-3 天)</li>
</ul>
</li>
</ul>
</li>
<li><p>贷后 <em>N</em> 天流转模型：预测贷后N天后的还款概率</p>
<ul>
<li>样本：缓催内未出催样本<ul>
<li>去除缓催样本影响，更多学习缓催期外出催样本信息</li>
<li>优先对催出概率高的人群进行催收，提高出催概率</li>
</ul>
</li>
<li>时间窗口<ul>
<li>观察点：还款日（逾期）后 <em>N</em> 天</li>
<li>表现期：至下个流转模型观察点、逾期阶段结束时间点</li>
</ul>
</li>
</ul>
</li>
<li><p><em>M2+</em> 模型：预测 <em>M2+</em> 阶段的还款概率（类似贷后流转模型）</p>
<ul>
<li>样本：<em>M1</em> 阶段未出催样本</li>
<li>时间窗口<ul>
<li>观察点：<em>M2</em> 阶段起始</li>
<li>表现期：至下个流转模型观察点、逾期阶段结束时间点</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="模型应用方法"><a href="#模型应用方法" class="headerlink" title="模型应用方法"></a>模型应用方法</h4><ul>
<li><p>缓催响应人群确定</p>
<ul>
<li>交叉 <em>M1</em> 模型、缓催响应模型，根据模型交叉结果设置阈值</li>
<li>根据阈值筛选缓催响应人群</li>
<li>限定缓催期（2-3 天），将缓催响应样本分为人工催收、缓催两组，观察两组在缓催期限内出催率变化<ul>
<li>若出催率相同，则认为缓催响应人群分析方法可行，对缓催响应人群可采取缓催策略</li>
<li>若出催率相差较大，则调整缓催响应人群分析方法</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>缓催模型响应时间（缓催期）可根据响应时间段内的出催率变化设置</li>
</ul>
</blockquote>
</li>
<li><p>模型搭建策略</p>
<ul>
<li><em>M1</em> 阶段出催概率较大，在M1阶段会设计多个细分模型<ul>
<li>至少：<em>M1</em> 阶段全量模型</li>
<li>缓催样本足够<ul>
<li>缓催响应模型</li>
<li>贷后 <em>N</em> 天流转模型</li>
</ul>
</li>
<li>精细化管理：多个不同时间窗口的贷后流转模型</li>
</ul>
</li>
<li><em>M2+</em> 阶段根据样本量、精细化程度设置适量模型</li>
</ul>
</li>
</ul>
<h2 id="开发流程标准化"><a href="#开发流程标准化" class="headerlink" title="开发流程标准化"></a>开发流程标准化</h2><ul>
<li>风控模型开发流程标准化意义<ul>
<li>提高建模效率：可批量快速生产模型，提高效率</li>
<li>帮助理解指标逻辑、业务含义，利于调试优化</li>
<li>流程规范约束<ul>
<li>统一建模流程，减少出错概率、便于问题回溯</li>
<li>统一命名方式，便于汇总文档</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="数据预处理"><a href="#数据预处理" class="headerlink" title="数据预处理"></a>数据预处理</h3><h4 id="特征编码"><a href="#特征编码" class="headerlink" title="特征编码"></a>特征编码</h4><ul>
<li><p>特征离散化</p>
</li>
<li><p><em>WOE</em> 编码特征</p>
<ul>
<li><em>WOE</em> 曲线应符合业务逻辑（一般单调），并且经过跨时间
窗口验证，否则应该调整</li>
<li><em>LR</em> 模型中特征权重应该全为正值，否则<ul>
<li>同数据 <em>WOE</em> 值体现的逻辑相违背</li>
<li>负值权重特征存在较严重共线性</li>
</ul>
</li>
</ul>
</li>
<li><p><em>one-hot</em> 编码特征</p>
<ul>
<li>同特征下个分箱单独作为独立变量取值<ul>
<li>权重灵活性更大，模型效果可能较好</li>
<li>变量数量多，需要样本数量大，模型效果可能较差（随机解法）</li>
</ul>
</li>
<li>各特征分箱之间无联系，难以通过模型剔除某个变量</li>
</ul>
</li>
</ul>
<h4 id="样本赋权"><a href="#样本赋权" class="headerlink" title="样本赋权"></a>样本赋权</h4><ul>
<li>样本赋权：充分利用所有样本的信息，避免样本有偏<ul>
<li>按样本距今时间赋权，近期样本高权重</li>
<li>按业务特性赋权，不同额度、利率、期限不同权重</li>
<li>按账户类型赋权</li>
</ul>
</li>
</ul>
<h4 id="拒绝推断"><a href="#拒绝推断" class="headerlink" title="拒绝推断"></a>拒绝推断</h4><ul>
<li><em>Reject Inference</em> 拒绝推断：避免样本偏差导致模型估计过于乐观</li>
</ul>
<h3 id="Exploratory-Data-Analysis"><a href="#Exploratory-Data-Analysis" class="headerlink" title="Exploratory Data Analysis"></a><em>Exploratory Data Analysis</em></h3><ul>
<li><p>风控领域样本较少，一般按月粒度观察，即将样本按月分组为 <em>vintage</em> 进行分析，探索、评估数据</p>
<ul>
<li>稳定性</li>
<li>信息量</li>
<li>信息重复/相关性</li>
</ul>
</li>
<li><p>实操中可逐阶段设置多组阈值，分布进行变量探索、筛选</p>
<ul>
<li>多组阈值逐步剔除能尽可能保留高信息量特征</li>
<li>避免相关性、<em>RF</em> 特征重要度等 <strong>非单变量指标</strong> 剔除过多特征</li>
</ul>
</li>
</ul>
<h3 id="模型评估"><a href="#模型评估" class="headerlink" title="模型评估"></a>模型评估</h3><ul>
<li><p>有效性/区分度</p>
<ul>
<li><em>GINI</em> 指数</li>
<li><em>KS</em> 值</li>
<li>坏样本率：组内、累计</li>
<li>提升度 = 召回样本坏样本率 / 全部样本坏样本率</li>
<li><em>odds</em> = 坏样本率 / 好样本率</li>
</ul>
</li>
<li><p>排序性</p>
<ul>
<li><em>AUC</em> 值/<em>ROC</em> 曲线</li>
</ul>
</li>
<li><p>稳定性</p>
<ul>
<li><em>PSI</em></li>
<li>各 <em>Vintage</em> 内坏占比、<em>Lift</em> 值、<em>odds</em> 等指标稳定性</li>
</ul>
</li>
<li><p>模型得分展示表</p>
<ul>
<li>箱内样本数</li>
<li>好、坏样本数</li>
<li>箱内坏样本、比例</li>
<li>累计好、坏样本</li>
<li>累计好、坏样本比例：<em>TPR</em>、<em>FPR</em>、<em>TPR-FPR</em></li>
<li>累计通过率、坏样本比例</li>
</ul>
</li>
</ul>
<h3 id="模型应用"><a href="#模型应用" class="headerlink" title="模型应用"></a>模型应用</h3><h4 id="Calibration-模型校准"><a href="#Calibration-模型校准" class="headerlink" title="Calibration 模型校准"></a><em>Calibration</em> 模型校准</h4><ul>
<li>一致性校准：将模型预测概率校准到真实概率</li>
<li>尺度变换：将风险概率转换为整数分数</li>
</ul>
<h4 id="导出得分"><a href="#导出得分" class="headerlink" title="导出得分"></a>导出得分</h4><ul>
<li><p>原始得分</p>
<ul>
<li><em>one-hot</em> 编码：<em>LR</em> 模型系数</li>
<li><em>WOE</em> 编码：<em>LR</em> 模型系数（权重）、<em>WOE</em> 值之积</li>
</ul>
</li>
<li><p>常对各特征得分做放缩、对账户得分和做平移</p>
<ul>
<li><em>PDO</em>：违约翻倍得分<ul>
<li>用于缩放原始得分</li>
<li>得分按 $\frac {PDO} {ln2}$ 缩放后，得分减少 $PDO$ 分，用户违约 <em>odds</em> 翻倍，缺省即 $ln2$</li>
</ul>
</li>
<li>账户得分总和平移则仅仅是为了美观</li>
</ul>
<blockquote>
<ul>
<li>对特征得分同时做等比例放缩、平移可行但蠢</li>
</ul>
</blockquote>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-08-04T14:47:06.000Z" title="8/4/2020, 10:47:06 PM">2020-08-04</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-08-04T14:47:06.000Z" title="8/4/2021, 10:47:06 PM">2021-08-04</time></span><span class="level-item"><a class="link-muted" href="/categories/ML-Specification/">ML Specification</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/NLP/">NLP</a></span><span class="level-item">10 minutes read (About 1457 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/ML-Specification/NLP/word2vec.html">Word2Vec</a></h1><div class="content"><h2 id="Word2Vec"><a href="#Word2Vec" class="headerlink" title="Word2Vec"></a>Word2Vec</h2><p>Word2Vec：word embeding的一种，使用层次化softmax、负采样
训练词向量</p>
<h2 id="Hierarchical-Softmax"><a href="#Hierarchical-Softmax" class="headerlink" title="Hierarchical Softmax"></a>Hierarchical Softmax</h2><p>层次Softmax</p>
<p><img src="/imgs/word2vec_hierarchical_softmax.png" alt="word2vec_hierarchical_softmax"></p>
<ul>
<li><p>对所有词向量求和取平均作为输入层到隐层的映射
（特指CBOW模型）</p>
</li>
<li><p>使用霍夫曼树代替从隐藏层到输出softmax层的映射</p>
</li>
</ul>
<h3 id="思想"><a href="#思想" class="headerlink" title="思想"></a>思想</h3><ul>
<li><p>softmax需要对$m$个类别求出softmax概率，参数多、计算复杂</p>
</li>
<li><p>考虑将$m$个类别划分为多个二分类sigmoid，即</p>
<ul>
<li>将总类别划分为两组</li>
<li>依次判断数据点属于哪组</li>
<li>直至数据点所属组仅包含一个类别</li>
</ul>
</li>
<li><p>则多个sigmoid划分构成一棵二叉树，树叶子节点即为$m$
类别</p>
<ul>
<li>二叉树结构可以由多种，最优二叉树应该使得对整个
数据集而言，sigmoid判断次数最少</li>
<li>即应该使用按照数据点频数构建的霍夫曼树</li>
<li>霍夫曼树</li>
</ul>
</li>
</ul>
<h3 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h3><ul>
<li><p>输入$x^T$所属类别霍夫曼编码为$d={d_1,\cdots,d_M}$，
则应最大化如下似然函数</p>
<script type="math/tex; mode=display">\begin{align*}
\prod_{i=1}^M P(d_i|x, w_{j_i}) & = \prod_{i=1}^M
   [\sigma(x^T w_{j_i} + b_{j_i})]^{d_i}
   [1 - \sigma(x^T w_{j_i} + b_{j_i})]^{1-d_i} \\
P(d_i|x, w_{j_i}) & = \left \{ \begin{array}{l}
   1 - \sigma(x^T w_{j_i} + b_{j_i}), & d_i = 0 \\
   \sigma(x^T w_{j_i} + b_{j_i}), & d_i = 1
   \end{array} \right. \\
\sigma(z) & = \frac 1 {1 + e^z}
\end{align*}</script><blockquote>
<ul>
<li>$w_j, b_j$：节点$j$对应sigmoid参数</li>
<li>$P(d_i)$：以sigmoid激活值作为正例概率
 （也可以其作为负例概率，但似然函数需更改）</li>
</ul>
</blockquote>
</li>
<li><p>则对数似然函数为</p>
<script type="math/tex; mode=display">
L = log \prod_{i=1}^M P(d_i|x, w_{j_i}) = \sum_{i=1}^M
   d_i log [\sigma(x^T w_{j_i} + b_{j_i})]
   {1-d_i} log [1 - \sigma(x^T w_{j_i} + b_{j_i})]</script></li>
</ul>
<h3 id="梯度计算"><a href="#梯度计算" class="headerlink" title="梯度计算"></a>梯度计算</h3><ul>
<li><p>则参数$w_{j_M}$梯度如下</p>
<script type="math/tex; mode=display">\begin{align*}
\frac {\partial L} {\partial w_{j_M}} & =
   d_M [1-\sigma(x^T w_{j_M} + b_{j_M})] x -
   (1 - d_M) \sigma(x^T w_{j_M} + b_{j_M}) x \\
& = (d_M - \sigma(x^T w_{j_M} + b_{j_M})) x
\end{align*}</script></li>
<li><p>词向量$x$梯度如下</p>
<script type="math/tex; mode=display">
\frac {\partial L} {\partial x} = \sum_{i=1}^M
   (d_i - \sigma(x^T w_{j_i} + b_{j_i})) w_{j_i}</script></li>
</ul>
<h3 id="CBOW流程"><a href="#CBOW流程" class="headerlink" title="CBOW流程"></a>CBOW流程</h3><blockquote>
<ul>
<li>特征词周围上下文词均使用梯度更新，<strong>更新输入</strong></li>
</ul>
</blockquote>
<ul>
<li>基于预料训练样本建立霍夫曼树</li>
<li>随机初始化模型参数$w$、词向量$w$</li>
<li><p>对训练集中每个样本 $(context(x), x)$（$2C$个上下文）如下
计算，直至收敛</p>
<ul>
<li><p>置：$e=0, x<em>w=\frac 1 {2C} \sum</em>{c=1}^{2C} x_c$</p>
</li>
<li><p>对$x$的霍夫曼编码 $d={d_1, \cdots, d_M}$ 中 $d_i$ 计算</p>
<script type="math/tex; mode=display">\begin{align*}
\sigma_i & = \sigma(x_w^T w_{j_i} + b_{j_i}) \\
g & = (d_i - \sigma_i) \eta \\
e & = e + g w_{j_i} \\
w_{j_i} & = w_{j_i} + g x_w
\end{align*}</script></li>
<li><p>更新 $2C$ 上下文词对应词向量</p>
<script type="math/tex; mode=display">
x_i = x_i + e</script></li>
</ul>
</li>
</ul>
<h3 id="Skip-Gram流程"><a href="#Skip-Gram流程" class="headerlink" title="Skip-Gram流程"></a>Skip-Gram流程</h3><blockquote>
<ul>
<li>考虑上下文是相互的，则 $P(x<em>{context}|x)$ 最大化时，$P(x|x</em>{context})$ 也最大</li>
<li>为在迭代窗口（样本）内更新仅可能多词向量，应该最大化 $P(x|x_{context})$，使用梯度更新上下文 $2C$ 个词向量，<strong>更新输出</strong>（条件概率中更新条件）</li>
</ul>
</blockquote>
<ul>
<li>基于预料训练样本建立霍夫曼树</li>
<li>随机初始化模型参数 $w$、词向量 $w$</li>
<li><p>对训练集中每个样本 $(x, context(x))$、每个样本中上下文词向量 $x_c$（$2C$ 个上下文），训练直至收敛</p>
<ul>
<li><p>置：$e=0$</p>
</li>
<li><p>对 $x$ 的霍夫曼编码 $d={d_1, \cdots, d_M}$ 中 $d_i$ 计算</p>
<script type="math/tex; mode=display">\begin{align*}
\sigma_i & = \sigma(x_c^T w_{j_i} + b_{j_i}) \\
g & = (d_i - \sigma_i) \eta \\
e & = e + g w_{j_i} \\
w_{j_i} & = w_{j_i} + g x_c
\end{align*}</script></li>
<li><p>更新 $2C$ 上下文词对应词向量</p>
<script type="math/tex; mode=display">
x_c = x_c + e</script></li>
</ul>
</li>
</ul>
<h2 id="Negtive-Sampling"><a href="#Negtive-Sampling" class="headerlink" title="Negtive Sampling"></a>Negtive Sampling</h2><p>负采样</p>
<h3 id="思想-1"><a href="#思想-1" class="headerlink" title="思想"></a>思想</h3><ul>
<li>通过负采样得到$neg$个负例</li>
<li>对正例、负采样负例建立二元逻辑回归</li>
</ul>
<h3 id="模型、梯度"><a href="#模型、梯度" class="headerlink" title="模型、梯度"></a>模型、梯度</h3><ul>
<li><p>对类别为$j$正例、负采样负例应有如下似然函数、对数似然
函数</p>
<script type="math/tex; mode=display">\begin{align*}
P(context(x), x) & = \sigma(x^T w_j)
   \prod_{i=1}^{neg} (1 - \sigma(x^T w_j)) \\
L & = log P(context(x), x) \\
& = \sum_{i=0}^{neg} [y_i log(\sigma(x^T w_j)) + 
   (1 - y_i) log(\sigma (x^T w_j))]
\end{align*}</script><blockquote>
<ul>
<li>$y_i$：样本点标签，$y_0$为正例、其余负例</li>
</ul>
</blockquote>
</li>
<li><p>同普通LR二分类，得到参数、词向量梯度</p>
<script type="math/tex; mode=display">\begin{align*}
\frac {\partial L} {\partial w_j} & =
   (y_i - \sigma(x^T w_j)) x \\
\frac {\partial L} {\partial x} & = \sum_{i=1}^{neg}
   (y_i - \sigma(x^T w_j)) w_j
\end{align*}</script></li>
</ul>
<h3 id="负采样方法"><a href="#负采样方法" class="headerlink" title="负采样方法"></a>负采样方法</h3><ul>
<li><p>每个词对应采样概率为词频取$3/4$次幂后加权</p>
<script type="math/tex; mode=display">
p(x_0) = \frac {count(x_0)^{3/4}}
   {\sum_{x \in vocab} count(x)^{3/4}}</script></li>
</ul>
<h3 id="CBOW流程-1"><a href="#CBOW流程-1" class="headerlink" title="CBOW流程"></a>CBOW流程</h3><ul>
<li>随机初始化所有模型参数、词向量</li>
<li>对每个训练样本$(context(x_0), x_0)$负采样$neg$个中心词
$x_i$，考虑$x_0$为类别$j$</li>
<li><p>在以上训练集$context(x<em>0), x_0, x_1, \cdots, x</em>{neg}$中
训练直至收敛</p>
<ul>
<li><p>置：$e=0, x<em>w=\frac 1 {2C} \sum</em>{c=1}^{2C} x_c$</p>
</li>
<li><p>对样本$x<em>0, x_1, \cdots, x</em>{neg}$，计算</p>
<script type="math/tex; mode=display">\begin{align*}
\sigma_i & = \sigma(x_w^T w_j + b_j) \\
g & = (y_i - \sigma_i) \eta \\
e & = e + g w_j \\
w_j & = w_j + g x_w
\end{align*}</script></li>
<li><p>更新$2C$上下文词对应词向量</p>
<script type="math/tex; mode=display">
x_i = x_i + e</script></li>
</ul>
</li>
</ul>
<h3 id="Skip-gram中心词"><a href="#Skip-gram中心词" class="headerlink" title="Skip-gram中心词"></a>Skip-gram中心词</h3><blockquote>
<ul>
<li>类似Hierarchical Softmax思想，更新输出$2C$个词向量</li>
</ul>
</blockquote>
<ul>
<li>随机初始化所有模型参数、词向量</li>
<li>对每个训练样本$(context(x_0), x_0)$负采样$neg$个中心词
$x_i$，考虑$x_0$为类别$j$</li>
<li><p>以上训练集$context(x<em>0), x_0, x_1, \cdots, x</em>{neg}$中，
对每个上下文词向量$x_c$如下训练直至收敛</p>
<ul>
<li><p>置：$e=0$</p>
<script type="math/tex; mode=display">\begin{align*}
\sigma_i & = \sigma(x_c^T w_j + b_j) \\
g & = (y_i - \sigma_i) \eta \\
e & = e + g w_j \\
w_j & = w_j + g x_c
\end{align*}</script></li>
<li><p>更新$2C$上下文词对应词向量</p>
<script type="math/tex; mode=display">
x_c = x_c + e</script></li>
</ul>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-07-29T13:16:01.000Z" title="7/29/2019, 9:16:01 PM">2019-07-29</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-07-16T08:49:01.000Z" title="7/16/2021, 4:49:01 PM">2021-07-16</time></span><span class="level-item"><a class="link-muted" href="/categories/ML-Specification/">ML Specification</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/Click-Through-Rate/">Click Through Rate</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/Click-Through-Rate/Recommandation-System/">Recommandation System</a></span><span class="level-item">16 minutes read (About 2352 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/ML-Specification/Click-Through-Rate/Recommandation-System/ctr_stacking_models.html">CTR Stacking Models</a></h1><div class="content"><h2 id="深度学习CTR"><a href="#深度学习CTR" class="headerlink" title="深度学习CTR"></a>深度学习CTR</h2><p><img src="/imgs/stacking_nn_models_envolution_network.png" alt="stacking_nn_models_envolution_network"></p>
<h2 id="Deep-Crossing"><a href="#Deep-Crossing" class="headerlink" title="Deep Crossing"></a>Deep Crossing</h2><p><em>Deep Crossing</em>：深度学习CTR模型最典型、基础性模型</p>
<p><img src="/imgs/deep_crossing_structure.png" alt="deep_crossing_structure"></p>
<blockquote>
<ul>
<li><em>multiple residual units</em>：残差网络</li>
</ul>
</blockquote>
<h2 id="Factorization-Machine-based-Neural-Network"><a href="#Factorization-Machine-based-Neural-Network" class="headerlink" title="Factorization Machine based Neural Network"></a>Factorization Machine based Neural Network</h2><p><em>FNN</em>：使用FM隐层作为embedding向量，避免完全从随机状态训练
embedding</p>
<p><img src="/imgs/fnn_structure.png" alt="fnn_structure"></p>
<ul>
<li><p>输入特征为高维稀疏特征，embeddingd层与输入层连接数量大、
训练效率低、不稳定</p>
</li>
<li><p>提前训练embedding提高模型复杂度、不稳定性</p>
</li>
</ul>
<h2 id="Product-based-Neural-Network"><a href="#Product-based-Neural-Network" class="headerlink" title="Product-based Neural Network"></a>Product-based Neural Network</h2><p><em>PNN</em>：在embedding层、全连接层间加入<em>product layer</em>，完成
针对性特征交叉</p>
<p><img src="/imgs/pnn_structure.png" alt="pnn_structure"></p>
<blockquote>
<ul>
<li><p><em>product layer</em>：在不同特征域间进行特征组合，定义有
  inner、outer product以捕捉不同的交叉信息，提高表示能力</p>
</li>
<li><p>传统DNN中通过多层全连接层完成特征交叉组合，缺乏针对性</p>
<blockquote>
<ul>
<li>没有针对不同特征域进行交叉</li>
<li>不是直接针对交叉特征设计</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<h2 id="Wide-amp-Deep-Network"><a href="#Wide-amp-Deep-Network" class="headerlink" title="Wide&amp;Deep Network"></a>Wide&amp;Deep Network</h2><p><em>Wide&amp;Deep</em>：结合深层网络、广度网络平衡记忆、泛化</p>
<p><img src="/imgs/wide_and_deep_structure.png" alt="wide_and_deep_structure"></p>
<blockquote>
<ul>
<li><em>deep models</em>：基于稠密embedding前馈神经网络</li>
<li><em>wide models</em>：基于稀疏特征、特征交叉、特征转换线性模型</li>
</ul>
</blockquote>
<ul>
<li>基于记忆的推荐通常和用户已经执行直接相关；基于泛化的推荐
更有可能提供多样性的推荐</li>
</ul>
<blockquote>
<ul>
<li><em>memorization</em>：记忆，学习频繁出现的物品、特征，从历史
  数据中探索相关性</li>
<li><p><em>generalization</em>：泛化，基于相关性的transitivity，探索
  较少出现的新特征组合</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://arxiv.org/pdf/1606.07792.pdf">https://arxiv.org/pdf/1606.07792.pdf</a></p>
</li>
<li>wide&amp;deep系模型应该都属于stacking集成</li>
</ul>
</blockquote>
<h3 id="Google-App-Store实现"><a href="#Google-App-Store实现" class="headerlink" title="Google App Store实现"></a>Google App Store实现</h3><p><img src="/imgs/wide_and_deep_logit_structure.png" alt="wide_and_deep_logit_structure"></p>
<script type="math/tex; mode=display">
P(Y=1|x) = \sigma(w_{wide}^T[x, \phi(x)] + w_{deep}^T
    \alpha^{l_f} + b)</script><ul>
<li><p>wide部分：<em>cross product transformation</em></p>
<ul>
<li>输入<ul>
<li>已安装Apps</li>
<li>impression Apps</li>
<li>特征工程交叉特征</li>
</ul>
</li>
<li>优化器：带L1正则的FTRL</li>
</ul>
</li>
<li><p>Deep部分：左侧DNN</p>
<ul>
<li>输入<ul>
<li>类别特征embedding：32维</li>
<li>稠密特征</li>
<li>拼接：拼接后1200维
（多值类别应该需要将embedding向量平均、极大化）</li>
</ul>
</li>
<li>优化器：AdaGrad</li>
<li>隐层结构<ul>
<li>激活函数relu优于tanh</li>
<li>3层隐层效果最佳</li>
<li>隐层使用塔式结构</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="DeepFM"><a href="#DeepFM" class="headerlink" title="DeepFM"></a>DeepFM</h2><p><em>DeepFM</em>：用FM替代<em>wide&amp;deep</em>中wide部分，提升其表达能力</p>
<p><img src="/imgs/deepfm_structure.png" alt="deepfm_structure"></p>
<blockquote>
<ul>
<li><em>Dense Embeddings</em>：FM中各特征隐向量，FM、DNN公用</li>
<li><em>FM Layer</em>：FM內积、求和层</li>
</ul>
</blockquote>
<script type="math/tex; mode=display">\begin{align*}
y_{FM} & = <w, x> + \sum_i \sum_j <v_i, v_j> x_i x_j + b \\
\hat y_{DeepFM} & = \sigma(y_{FM} + y_{DNN})
\end{align*}</script><ul>
<li><p>特点（和Wide&amp;Deep关键区别）</p>
<ul>
<li>wide部分为FM
（deep&amp;wide中wide部分有特征交叉，但依靠特征工程实现）</li>
<li>FM、DNN部分共享embedding层</li>
</ul>
</li>
<li><p>同时组合wide、二阶交叉、deep三部分结构，增强模型表达能力</p>
<ul>
<li>FM负责一阶特征、二阶特征交叉</li>
<li>DNN负责更高阶特征交叉、非线性</li>
</ul>
</li>
</ul>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><ul>
<li><p>DNN部分隐层</p>
<ul>
<li>激活函数relu优于tanh</li>
<li>3层隐层效果最佳</li>
<li>神经元数目在200-400间为宜，略少于Wide&amp;Deep</li>
<li>在总神经元数目固定下，constant结构最佳</li>
</ul>
</li>
<li><p>embedding层</p>
<ul>
<li>实验中维度为10</li>
</ul>
</li>
</ul>
<h2 id="Deep-amp-Cross-Network"><a href="#Deep-amp-Cross-Network" class="headerlink" title="Deep&amp;Cross Network"></a>Deep&amp;Cross Network</h2><p><em>Deep&amp;Cross</em>：用cross网络替代<em>wide&amp;deep</em>中wide部分，提升其
表达能力</p>
<p><img src="/imgs/deep_and_cross_structure.png" alt="deep_and_cross_structure"></p>
<ul>
<li><p>特点（和WDL、DeepFM区别）</p>
<ul>
<li>使用交叉网络结构提取高阶交叉特征<ul>
<li>无需特征工程（WDL）</li>
<li>不局限于二阶交叉特征（DeepFM）</li>
</ul>
</li>
</ul>
</li>
<li><p>交叉网络可以使用较少资源提取高阶交叉特征</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://arxiv.org/pdf/1708.05123.pdf">https://arxiv.org/pdf/1708.05123.pdf</a></p>
<h3 id="交叉网络"><a href="#交叉网络" class="headerlink" title="交叉网络"></a>交叉网络</h3><p>交叉网络：以有效地方式应用显式特征交叉，由多个交叉层组成</p>
<p><img src="/imgs/cross_network_cross_layer.png" alt="cross_network_cross_layer"></p>
<script type="math/tex; mode=display">\begin{align*}
x_{l+1} & = f(x_l, w_l, b_l) + x_l \\
& = x_0 x_l^T w_l + b_l + x_l
\end{align*}</script><blockquote>
<ul>
<li>$x_l$：第$l$交叉层输出</li>
<li>$w_l, b_l$：第$l$交叉层参数</li>
</ul>
</blockquote>
<ul>
<li><p>借鉴残差网络思想</p>
<ul>
<li>交叉层完成特征交叉后，会再加上其输入</li>
<li>则映射函数$f(x_l, w_l, b_l)$即拟合残差</li>
</ul>
</li>
<li><p>特征高阶交叉</p>
<ul>
<li>每层$x_0 x_l^T$都是特征交叉</li>
<li>交叉特征的阶数随深度$l$增加而增加，最高阶为$l+1$</li>
</ul>
</li>
<li><p>复杂度（资源消耗）</p>
<ul>
<li>随输入向量维度、深度、线性增加</li>
<li>受益于$x_l^T w$为标量，由结合律无需存储中间过程矩阵</li>
</ul>
</li>
</ul>
<h2 id="Nueral-Factorization-Machine"><a href="#Nueral-Factorization-Machine" class="headerlink" title="Nueral Factorization Machine"></a>Nueral Factorization Machine</h2><p><em>NFM</em>：用带二阶交互池化层的DNN替换FM中二阶交叉项，提升FM的
非线性表达能力</p>
<script type="math/tex; mode=display">\begin{align*}
\hat y_{NFM}(x) & = w_0 + \sum_{i=1}^m w_i x_i + f_{DNN}(x) \\
& = w_0 + \sum_{i=1}^m + h^T f_{\sigma}(f_{BI}(\varepsilon_x))
\end{align*}</script><blockquote>
<ul>
<li>$f_{DNN}(x)$：多层前馈神经网络，包括<em>Embedding Layer</em>、
  <em>Bi-Interaction Layer</em>、<em>Hidden Layer</em>、
  <em>Prediciton Layer</em></li>
<li>$h^T$：DNN输出层权重</li>
</ul>
</blockquote>
<h3 id="模型结构"><a href="#模型结构" class="headerlink" title="模型结构"></a>模型结构</h3><p><img src="/imgs/nfm_structure.png" alt="nfm_structure"></p>
<h4 id="Embedding-Layer"><a href="#Embedding-Layer" class="headerlink" title="Embedding Layer"></a><em>Embedding Layer</em></h4><p>全连接网络：将每个特征映射为稠密向量表示</p>
<script type="math/tex; mode=display">
\varepsilon_x = \{x_1v_1, x_2v_2, \cdots, x_mv_m\}</script><blockquote>
<ul>
<li>$v_i$：$k$维embedding向量</li>
</ul>
</blockquote>
<ul>
<li>只需要考虑非0特征，得到一组特征向量</li>
<li>特征向量会乘以特征值以反映真实值特征
（一般embedding特征取0/1，等价于查表）</li>
</ul>
<h4 id="Bi-Interaction-Layer"><a href="#Bi-Interaction-Layer" class="headerlink" title="Bi-Interaction Layer"></a><em>Bi-Interaction Layer</em></h4><p>BI层：将一组embedding向量转换为单个向量</p>
<script type="math/tex; mode=display">\begin{align*}
f_(BI)(\varepsilon_x) & = \sum_{i=1} \sum_{j=i+1}
    x_i v_i \odot x_j v_j \\
& = \frac 1 2 (\|\sum_{i=1}^m x_i v_i\|_2^2 -
    \sum_{i=1}^m \|x_i v_i\|_2^2)
\end{align*}</script><blockquote>
<ul>
<li>$\odot$：逐元素乘积</li>
</ul>
</blockquote>
<ul>
<li>没有引入额外参数，可在线性时间$\in O(kM_x)$内计算</li>
<li>可以捕获在低层次二阶交互影响，较拼接操作更
informative，方便学习更高阶特征交互</li>
</ul>
<blockquote>
<ul>
<li>将BI层替换为拼接、同时替换隐层为塔型MLP（残差网络）
  则可以得到<em>wide&amp;deep</em>、<em>DeepCross</em></li>
<li>拼接操作不涉及特征间交互影响，都交由后续深度网络学习
  ，实际操作中比较难训练</li>
</ul>
</blockquote>
<h4 id="Hidden-Layer"><a href="#Hidden-Layer" class="headerlink" title="Hidden Layer"></a><em>Hidden Layer</em></h4><p>隐层：普通多层嵌套权重、激活函数</p>
<script type="math/tex; mode=display">
f_{\sigma} = \sigma_l(\beta_l (\cdot 
    \sigma_1(\beta_l f_{BI}(\varepsilon_X) + b_1)) + b_l)</script><blockquote>
<ul>
<li>$l=0$没有隐层时，$f_{\sigma}$原样输出，取$h^T$为
  全1向量，即可得FM模型</li>
</ul>
</blockquote>
<h2 id="Attentional-Factorization-Machines"><a href="#Attentional-Factorization-Machines" class="headerlink" title="Attentional Factorization Machines"></a>Attentional Factorization Machines</h2><p><em>AFM</em>：引入Attention网络替换FM中二阶交互项，学习交互特征的
重要性，剔除无效的特征组合（交互项）</p>
<script type="math/tex; mode=display">\begin{align*}
\hat y_{AFM} & = w_0 + \sum_{i=1}^m w_i x_i +
    f_{AFM}(\varepsilon) \\
& = w_0 + \sum_{i=1}^m w_i x_i + p^T \sum_{i=1}^m \sum_{j=i+1}^m
    a_{i,j} (v_i \odot v_j) x_i x_j
\end{align*}</script><blockquote>
<ul>
<li>$\varepsilon$：隐向量集，同上</li>
<li>$p^T$：Attention网络输出权重</li>
</ul>
</blockquote>
<h3 id="模型结构-1"><a href="#模型结构-1" class="headerlink" title="模型结构"></a>模型结构</h3><p><img src="/imgs/afm_structure.png" alt="afm_structure"></p>
<h4 id="Pair-Wise-Interaction-Layer"><a href="#Pair-Wise-Interaction-Layer" class="headerlink" title="Pair-Wise Interaction Layer"></a><em>Pair-Wise Interaction Layer</em></h4><p>成对交互层：将m个embedding向量扩充为$m(m-1)/2$个交互向量</p>
<script type="math/tex; mode=display">
f_{PI}(\varepsilon) = \{(v_i \odot v_j) x_i x_j\}_{(i,j) \in R_X}</script><blockquote>
<ul>
<li>$R_X = {(i,j) | i \in X, j \in X, j &gt; i }$</li>
<li>$v_i$：$k$维embedding向量</li>
</ul>
</blockquote>
<h4 id="Attention-based-Pooling"><a href="#Attention-based-Pooling" class="headerlink" title="Attention-based Pooling"></a><em>Attention-based Pooling</em></h4><p>注意力池化层：压缩交互作用为单一表示时，给交互作用赋不同权重</p>
<script type="math/tex; mode=display">\begin{align*}
f_{Att}(f_{PI}(\varepsilon)) = \sum_{(i,j) \in R_X}
    a_{i,j} (v_i \odot v_j) x_i x_j
\end{align*}</script><blockquote>
<ul>
<li>$a<em>{i,j}$：交互权重$w</em>{i,j}$的注意力得分</li>
<li>$\odot$：逐元素乘积</li>
</ul>
</blockquote>
<ul>
<li><p>考虑到特征高维稀疏，注意力得分不能直接训练，使用MLP
<em>attention network</em>参数化注意力得分</p>
<script type="math/tex; mode=display">\begin{align*}
a_{i,j}^{'} & = h^T ReLU(W((v_i \odot v_j) x_i x_j) + b) \\
a_{i,j} & = \frac {exp(a_{i,j}^{'})}
   {\sum_{(i,j) \in R_X} exp(a_{i,j}^{'})}
\end{align*}</script><blockquote>
<ul>
<li>$W \in R^{t*k}, b \in R^t, h \in R^T$：模型参数</li>
<li>$t$：attention network隐层大小</li>
</ul>
</blockquote>
</li>
</ul>
<h2 id="Deep-Interest-Network"><a href="#Deep-Interest-Network" class="headerlink" title="Deep Interest Network"></a>Deep Interest Network</h2><p><em>DIN</em>：融合Attention机制作用于DNN</p>
<h3 id="模型结构-2"><a href="#模型结构-2" class="headerlink" title="模型结构"></a>模型结构</h3><p><img src="/imgs/din_structure.png" alt="din_stucture"></p>
<h4 id="activation-unit"><a href="#activation-unit" class="headerlink" title="activation unit"></a><em>activation unit</em></h4><p>激活单元</p>
<script type="math/tex; mode=display">\begin{align*}
v_U(A) & = f_{au}(v_A, e_1, e_2, \cdots, e_H) \\
& = \sum_{j=1}^H a(e_j, v_A) e_j \\
& = \sum_{j=1}^H w_j e_j
\end{align*}</script><blockquote>
<ul>
<li>相较于上个结构仅多了直接拼接的用户、上下文特征
  <img src="/imgs/din_structure_comparision.png" alt="din_stucture_comparision"></li>
</ul>
</blockquote>
<h3 id="模型训练"><a href="#模型训练" class="headerlink" title="模型训练"></a>模型训练</h3><h4 id="Mini-batch-Aware-Regularization"><a href="#Mini-batch-Aware-Regularization" class="headerlink" title="Mini-batch Aware Regularization"></a>Mini-batch Aware Regularization</h4><blockquote>
<ul>
<li>以Batch内参数平均近似$L_2$约束</li>
</ul>
</blockquote>
<script type="math/tex; mode=display">\begin{align*}
L_2(W) & = \sum_{i=1}^M \sum_{j=1}^B \sum_{(x,y) \in B_j}
    \frac {I(x_i \neq 0)} {n_i} \|W_i\|_2^2 \\
& \approx \sum_{i=1}^M \sum_{j=1}^B \frac {\alpha_{j,i}} {n_i}
    \|W_i\|_2^2
\end{align*}</script><blockquote>
<ul>
<li>$W \in R^{K * M}, W_i$：embedding字典、第$i$embedding
  向量</li>
<li>$K, M$：embedding向量维数、特征数量</li>
<li>$B, B_j$：batch数量、第$j$个batch</li>
</ul>
</blockquote>
<ul>
<li><p>则参数迭代</p>
<script type="math/tex; mode=display">
W_i \leftarrow w_j - \eta[\frac 1 {|B_j|} \sum_{(x,y) \in B_j}
   \frac {\partial L(p(x), y)} {\partial W_j} + \lambda
   \frac {\alpha_{j,i}} {n_i} W_i]</script></li>
</ul>
<h4 id="Data-Adaptive-Activation-Function"><a href="#Data-Adaptive-Activation-Function" class="headerlink" title="Data Adaptive Activation Function"></a>Data Adaptive Activation Function</h4><script type="math/tex; mode=display">\begin{align*}
f(x) & = \left \{ \begin{array}{l}
        x, & x > 0 \\
        \alpha x, & x \leq 0
    \end{array} \right. \\
& = p(x) * x + (1 - p(x)) * x \\
p(x) & = I(x > 0)
\end{align*}</script><p>PReLU在0点处硬修正，考虑使用其他对输入自适应的函数替代，以
适应不同层的不同输入分布</p>
<script type="math/tex; mode=display">
p(x)  \frac 1 {1 + exp(-\frac {x - E[x]} {\sqrt{Var[x] + \epsilon}})}</script><h2 id="Deep-Interest-Evolution-Network"><a href="#Deep-Interest-Evolution-Network" class="headerlink" title="Deep Interest Evolution Network"></a>Deep Interest Evolution Network</h2><p><em>DIEN</em>：引入序列模型AUGRU模拟行为进化过程</p>
<h3 id="模型结构-3"><a href="#模型结构-3" class="headerlink" title="模型结构"></a>模型结构</h3><p><img src="/imgs/dien_structure.png" alt="dien_structure"></p>
<ul>
<li><em>Interest Extractor Layer</em>：使用GRU单元建模历史行为依赖
关系</li>
</ul>
<p>?
    关系</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-07-23T00:39:04.000Z" title="7/23/2019, 8:39:04 AM">2019-07-23</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-07-16T08:50:56.000Z" title="7/16/2021, 4:50:56 PM">2021-07-16</time></span><span class="level-item"><a class="link-muted" href="/categories/ML-Specification/">ML Specification</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/Click-Through-Rate/">Click Through Rate</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/Click-Through-Rate/Recommandation-System/">Recommandation System</a></span><span class="level-item">9 minutes read (About 1380 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/ML-Specification/Click-Through-Rate/Recommandation-System/video_recsys.html">视频推荐</a></h1><div class="content"><h2 id="Matching"><a href="#Matching" class="headerlink" title="Matching"></a>Matching</h2><h3 id="基于用户行为"><a href="#基于用户行为" class="headerlink" title="基于用户行为"></a>基于用户行为</h3><h4 id="离线协同过滤"><a href="#离线协同过滤" class="headerlink" title="离线协同过滤"></a>离线协同过滤</h4><ul>
<li><p>根据用户行为日志，利用<em>物品-based</em>协同过滤生成离线的
物品2物品相似度矩阵、用户离线推荐结果</p>
<ul>
<li>基于艾宾浩斯遗忘曲线按照时间进行降权</li>
<li>弱化热点影片的权重</li>
<li>矩阵分解</li>
</ul>
</li>
<li><p>基于用户的playlog接口实时获取用户的短时间内的观看历史，
通过物品2物品相似度矩阵进行CF扩散，提取出与用户短时间内
观看历史相似的topN个物品用于召回</p>
</li>
<li><p>用户的CF离线推荐结果直接作为线上服务的召回渠道</p>
</li>
</ul>
<h4 id="W2V"><a href="#W2V" class="headerlink" title="W2V"></a>W2V</h4><ul>
<li><p>全部影片作为预料库、观看历史按时序排列视为文档，计算所有
物品的词向量</p>
</li>
<li><p>根据词向量计算物品2物品相似度矩阵，用于线上playlog召回
数据</p>
</li>
</ul>
<h4 id="LDA"><a href="#LDA" class="headerlink" title="LDA"></a>LDA</h4><ul>
<li><p>基于概率主题模型：文档-潜在主题-词三级关系，映射/类比到
用户行为数据：用户-潜在兴趣-资源</p>
</li>
<li><p>通过用户历史行为记录，提取LDA中间产物、用户的潜在兴趣
向量、资源潜在主题分布向量</p>
</li>
<li><p>基于物品的主题向量，进行物品2物品相似度计算，用于线上
playlog召回数据</p>
</li>
</ul>
<h4 id="SimRank"><a href="#SimRank" class="headerlink" title="SimRank"></a>SimRank</h4><ul>
<li>将用户、物品关系视为二部图，考虑相似关系可以在图上传播
思想，使用SimRank计算物品相似队列</li>
</ul>
<h3 id="基于内容"><a href="#基于内容" class="headerlink" title="基于内容"></a>基于内容</h3><h4 id="基于标题"><a href="#基于标题" class="headerlink" title="基于标题"></a>基于标题</h4><ul>
<li>对影片文本简介使用doc2vector，计算资源的表示向量</li>
<li>使用资源的表示项集计算物品2物品相似度矩阵</li>
</ul>
<h4 id="基于Style"><a href="#基于Style" class="headerlink" title="基于Style"></a>基于Style</h4><h4 id="基于Tag"><a href="#基于Tag" class="headerlink" title="基于Tag"></a>基于Tag</h4><h3 id="其他方向"><a href="#其他方向" class="headerlink" title="其他方向"></a>其他方向</h3><ul>
<li><p>RNN捕捉用户在点击序列中的模式，利用点击行为发生先后顺序
调整推荐展示顺序</p>
</li>
<li><p>Graph Embedding</p>
</li>
</ul>
<h2 id="Ranking"><a href="#Ranking" class="headerlink" title="Ranking"></a>Ranking</h2><h3 id="特征工程"><a href="#特征工程" class="headerlink" title="特征工程"></a>特征工程</h3><ul>
<li><p>低维稠密通用特征：泛化能力良好、记忆能力差</p>
<ul>
<li>embedding特征</li>
<li>统计特征</li>
</ul>
</li>
<li><p>高维稠密特征：记忆能力较好</p>
<ul>
<li>视频ID</li>
<li>标签</li>
<li>主题</li>
</ul>
</li>
</ul>
<h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><ul>
<li><p>按特征来源分类</p>
<ul>
<li>物品特征：资源风格、低于、类型、标签、统计特征</li>
<li>用户特征：性别、年龄、婚姻状况、收入预测</li>
<li>context特征：网络状态、时间段、城市</li>
<li>交叉特征</li>
</ul>
</li>
<li><p>按特征更新频率、获取方式</p>
<ul>
<li>离线特征：变化缓慢，如：用户、物品基本特征、统计特征</li>
<li>近在线特征：分钟级、小时级需要更新的特征，如：ctr</li>
<li>在线特征：每次请求达到实时获取特征，如：网络状态、
请求时间</li>
</ul>
</li>
</ul>
<h4 id="特征扩充"><a href="#特征扩充" class="headerlink" title="特征扩充"></a>特征扩充</h4><ul>
<li><p>用户兴趣向量丰富用户维度上兴趣特征</p>
<ul>
<li>LDA中间产物作为用户潜在兴趣向量</li>
<li>W2V词向量、用户行为历史统计出用户兴趣向量</li>
</ul>
</li>
<li><p>资源embedding向量丰富物品维度特征</p>
<ul>
<li>用户行为数据embedding得到W2V、LDA词向量</li>
<li>资源标题embedding得到doc2vector词向量</li>
</ul>
</li>
<li><p>资源封面AutoEncode向量</p>
<ul>
<li>基于资源封面采用自编码器训练，提取隐层向量作为资源
特征</li>
</ul>
</li>
</ul>
<h4 id="统计特征细化"><a href="#统计特征细化" class="headerlink" title="统计特征细化"></a>统计特征细化</h4><ul>
<li><p>特征工程时间窗口细化：按不同时间窗口分别计算资源的统计
特征</p>
<ul>
<li>丰富资源特征</li>
<li>融入时间衰减因素</li>
</ul>
</li>
<li><p>在线特征交叉：交叉特征增加样本特征的区分度</p>
</li>
</ul>
<h4 id="连续特征离散化"><a href="#连续特征离散化" class="headerlink" title="连续特征离散化"></a>连续特征离散化</h4><blockquote>
<ul>
<li>目标：避免特征为长尾分布、大部分取值集中在小范围，对样本
  区分度差</li>
</ul>
</blockquote>
<ul>
<li>等频离散化：等频分桶、独热编码</li>
<li>对数转化</li>
</ul>
<h4 id="采样策略"><a href="#采样策略" class="headerlink" title="采样策略"></a>采样策略</h4><ul>
<li>负样本采样策略调整：基本曝光时间、顺序，过滤负样本</li>
<li>不平衡样本策略调整：离线A/B测试正负样本比例，择优调整</li>
</ul>
<h3 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h3><ul>
<li>一般使用stacking模型堆叠集成</li>
</ul>
<blockquote>
<ul>
<li>参见<em>ml_models/model_enhancement/ensemble_stacking</em></li>
</ul>
</blockquote>
<h4 id="基学习器"><a href="#基学习器" class="headerlink" title="基学习器"></a>基学习器</h4><ul>
<li><p>GBDT：各树、各叶子节点对应一维特征</p>
<ul>
<li>适合低维稠密通用特征，对输入特征分布没有要求</li>
</ul>
</li>
<li><p>DNN</p>
<ul>
<li>适合普通稠密特征、embedding特征</li>
<li>能抽取有良好分布数据的深层次特征，提高模型准确性、
泛化能力</li>
</ul>
</li>
</ul>
<h4 id="元学习器"><a href="#元学习器" class="headerlink" title="元学习器"></a>元学习器</h4><ul>
<li><p>LR</p>
<ul>
<li>适合低维稀疏特征，可对所有特征离散化以引入非线性</li>
</ul>
</li>
<li><p>FM</p>
<ul>
<li>适合低维稀疏特征</li>
<li>LR基础上自动组合二阶交叉项</li>
</ul>
</li>
<li><p>Linear：训练模型、对训练结果线性加权</p>
</li>
</ul>
<h2 id="冷启动、EE"><a href="#冷启动、EE" class="headerlink" title="冷启动、EE"></a>冷启动、EE</h2><h3 id="冷启动"><a href="#冷启动" class="headerlink" title="冷启动"></a>冷启动</h3><h4 id="Matching-1"><a href="#Matching-1" class="headerlink" title="Matching"></a>Matching</h4><ul>
<li><p>冷启动用户召回</p>
<ul>
<li>使用imbd算法计算资源得分，根据不同时间周期进行得分
融合、并ab测试，选取最优时间周期组合</li>
<li>按照imdb得分倒排，生成热点召回数据</li>
</ul>
</li>
<li><p>冷启动资源召回</p>
<ul>
<li>基于资源库，统计各资源点击、播放率，按一定比例召回
第点击、播放率物品</li>
</ul>
</li>
</ul>
<h4 id="Ranking-1"><a href="#Ranking-1" class="headerlink" title="Ranking"></a>Ranking</h4><blockquote>
<ul>
<li>通常使用强化学习算法</li>
</ul>
</blockquote>
<ul>
<li>Thompson Sampling</li>
<li>UCB算法</li>
<li>Epsilon-Greedy算法</li>
<li>朴素Bandit算法</li>
<li>LinUCB算法：较UCB算法加入特征信息</li>
<li>COFIBA算法：Bandit算法结合协同过滤</li>
</ul>
<h3 id="Exploration-and-Exploitation-Tradeoff"><a href="#Exploration-and-Exploitation-Tradeoff" class="headerlink" title="Exploration and Exploitation Tradeoff"></a><em>Exploration and Exploitation Tradeoff</em></h3><h4 id="Matching-2"><a href="#Matching-2" class="headerlink" title="Matching"></a>Matching</h4><ul>
<li>调整不同召回渠道的配比方式保证多样性</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-07-20T16:46:35.000Z" title="7/21/2019, 12:46:35 AM">2019-07-21</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-07-16T08:50:35.000Z" title="7/16/2021, 4:50:35 PM">2021-07-16</time></span><span class="level-item"><a class="link-muted" href="/categories/ML-Specification/">ML Specification</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/Click-Through-Rate/">Click Through Rate</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/Click-Through-Rate/Recommandation-System/">Recommandation System</a></span><span class="level-item">7 minutes read (About 1086 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/ML-Specification/Click-Through-Rate/Recommandation-System/recommendation_system.html">Recommendation System</a></h1><div class="content"><h2 id="推荐系统架构"><a href="#推荐系统架构" class="headerlink" title="推荐系统架构"></a>推荐系统架构</h2><p><img src="/imgs/recommendation_system_procedure_3.png" alt="recommendation_system_procedure"></p>
<h3 id="Matching"><a href="#Matching" class="headerlink" title="Matching"></a>Matching</h3><p>召回算法Match：包含多个渠道的召回模型，希望从资源库中选取
多样性偏好内容，缩小排序目标</p>
<ul>
<li>协同过滤</li>
<li>主题模型</li>
<li>内容召回</li>
<li>热点召回</li>
</ul>
<h3 id="Ranking"><a href="#Ranking" class="headerlink" title="Ranking"></a>Ranking</h3><p>排序：对多个召回渠道内容打分、排序、选出最优的少量结果</p>
<ul>
<li>若召回结果仍包含大量数据，可以考虑分为两个阶段<ul>
<li>粗排：进一步剔除召回结果</li>
<li>精排：对粗排结果再次打分、排序，得到最终推荐结果</li>
</ul>
</li>
</ul>
<h2 id="Collaborative-Filtering-Based-Recommendation"><a href="#Collaborative-Filtering-Based-Recommendation" class="headerlink" title="Collaborative Filtering-Based Recommendation"></a>Collaborative Filtering-Based Recommendation</h2><p>基于协同过滤推荐算法：推荐算法中主流</p>
<ul>
<li><p>模型一般为n个物品、m个用户的表</p>
<ul>
<li>只有部分用户、物品之间有评分数据</li>
<li>要用已有部分稀疏数据预测空白物品、数据之间评分关系，
推荐高评分物品</li>
</ul>
</li>
<li><p>无需太多特定领域的知识，可通过基于统计的机器学习算法得到
较好推荐效果，可以分为</p>
<ul>
<li>基于用户</li>
<li>基于物品</li>
<li>基于模型</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>现在指推荐算法一般指协同过滤，其他基于内容、规则、人口
  统计信息等都被包含/忽略</li>
</ul>
</blockquote>
<h3 id="User-based"><a href="#User-based" class="headerlink" title="User-based"></a>User-based</h3><p>基于用户协同过滤：主要考虑用户之间相似度，找出相似用户、相似
用户喜欢的物品，预测目标用户对对应物品的评分，推荐高评分物品</p>
<ul>
<li><p>特点：（相较于Item-Based）推荐<strong>更社会化</strong></p>
<ul>
<li>反映用户所在小型兴趣群体中物品热门程度</li>
<li>可帮助用户找到<strong>新类别、惊喜</strong>物品</li>
</ul>
</li>
<li><p>适合场景</p>
<ul>
<li>用户数量较少、变化慢场合，否则更新、计算用户相似度矩阵
代价大</li>
<li>时效性强、用户个性化兴趣不明显领域</li>
<li>无需给出推荐解释</li>
<li>示例<ul>
<li>新闻推荐：注重热门、时效、item更新快</li>
<li>热点视频推荐</li>
</ul>
</li>
</ul>
</li>
<li><p>方法</p>
<ul>
<li>基于规则：大众型推荐方法，如：最多用户点击、浏览</li>
<li>基于人口统计信息：简单根据用户基本信息发现用户相关
程度、推荐</li>
<li>混合推荐<ul>
<li>结合多个推荐算法，集成算法推荐结果</li>
<li>复杂度高</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Item-Based-Collaborative-Filtering"><a href="#Item-Based-Collaborative-Filtering" class="headerlink" title="Item-Based Collaborative Filtering"></a>Item-Based Collaborative Filtering</h3><p>基于项目协同过滤：考虑物品和物品之间的相似度，找到目标用户
对某些物品的评分，预测用户对相似度高的类似物品评分，推荐高
评分相似物品</p>
<ul>
<li><p>特点：（相较于User-Based）推荐<strong>更个性化</strong></p>
<ul>
<li>反映用户自身的兴趣传承</li>
<li>可帮助用户深入挖掘自身兴趣</li>
<li>准确度一般</li>
<li>推荐多样性弱，难以带来惊喜</li>
</ul>
</li>
<li><p>适合场景</p>
<ul>
<li>物品数量较少、变化慢场合，否则更新、计算物品相似度
矩阵代价大</li>
<li>长尾物品丰富、个性化需求不明显</li>
<li>需要向用户给出推荐理由</li>
<li>示例<ul>
<li>电商</li>
<li>电影：兴趣持久、更个性化</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Model-Based-Collaborative-Filtering"><a href="#Model-Based-Collaborative-Filtering" class="headerlink" title="Model-Based Collaborative Filtering"></a>Model-Based Collaborative Filtering</h3><p>基于模型：目前最主流的协同过滤类型</p>
<ul>
<li><p>关联算法：找出用户-物品数据里频繁出现的项集，作频繁集
挖掘，推荐频繁集、序列中其他物品</p>
<ul>
<li><em>Apriori</em></li>
<li><em>FPTree</em></li>
<li><em>PrefixSpan</em></li>
</ul>
</li>
<li><p>聚类算法：按照用户、物品基于一定距离度量聚类，推荐高评分
同类物品、同类人群
（类似于基于用户、物品协同过滤）</p>
<ul>
<li><em>K-means</em></li>
<li><em>BIRCH</em></li>
<li><em>DBSCAN</em></li>
<li><em>Spectral Clustering</em></li>
</ul>
</li>
<li><p>分类算法：使用分类模型划分物品</p>
<ul>
<li>逻辑回归</li>
<li>朴素贝叶斯</li>
</ul>
</li>
<li><p>回归算法：使用回归模型给物品预测打分，较分类更平滑</p>
<ul>
<li>线性回归</li>
<li>决策树</li>
<li>SVM</li>
</ul>
</li>
<li><p>矩阵分解：对用户-物品评分矩阵进行分解</p>
<ul>
<li>FunkSVD</li>
<li>BiasSVD</li>
<li>SVD++</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>还有基于图模型、神经网络等新模型</li>
<li>还有依赖于自然语言处理NLP，通过挖掘文本内容特征，得到
  用户的偏好，进而做推荐，同样可以找到用户独特的小众喜好</li>
</ul>
</blockquote>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-07-14T12:58:18.000Z" title="7/14/2019, 8:58:18 PM">2019-07-14</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-07-16T08:43:03.000Z" title="7/16/2021, 4:43:03 PM">2021-07-16</time></span><span class="level-item"><a class="link-muted" href="/categories/ML-Specification/">ML Specification</a><span> / </span><a class="link-muted" href="/categories/ML-Specification/NLP/">NLP</a></span><span class="level-item">21 minutes read (About 3137 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/ML-Specification/NLP/features_extractions.html">文本预处理</a></h1><div class="content"><h2 id="文本预处理"><a href="#文本预处理" class="headerlink" title="文本预处理"></a>文本预处理</h2><ul>
<li>去除噪声文档、文档中垃圾数据</li>
<li>停用词去除</li>
<li>词根还原（英文）</li>
<li>分词（中文）</li>
<li>词性标注</li>
<li>短语识别</li>
<li>词频统计</li>
</ul>
<h2 id="汉语分词"><a href="#汉语分词" class="headerlink" title="汉语分词"></a>汉语分词</h2><p>分词：添加合适的显性词语边界标志，使所形成的词串反映句子本意</p>
<ul>
<li><p>分词是正确处理中文信息的基础</p>
<ul>
<li>文本基于单字</li>
<li>书面表达方式以汉字作为最小单位</li>
<li>词之间没有显性界限标志</li>
</ul>
</li>
<li><p>用单个汉字作特征，不考虑词语含义，直接利用汉字在文本中
出现的<strong>统计特性</strong>对文本进行划分</p>
<ul>
<li>直观明了</li>
<li>操作简单</li>
<li>对西语文本划分非常容易（使用空格划分）</li>
</ul>
</li>
<li><p>使用词作为特征</p>
<ul>
<li>词是中文语义的最小信息单位，可以更好的反映句子中信息</li>
<li>分析难度更高，中文文本中词之间没有分隔标记，正确分词
是关键</li>
</ul>
</li>
</ul>
<h3 id="分词方法"><a href="#分词方法" class="headerlink" title="分词方法"></a>分词方法</h3><ul>
<li><p>基于词典</p>
<ul>
<li><em>FMM</em>：正向最大匹配分词</li>
<li><em>BMM</em>：逆向最大匹配分词</li>
<li>BM法：双向扫描法</li>
<li>逐词遍历</li>
</ul>
</li>
<li><p>基于统计模型</p>
<ul>
<li>N-最短路径</li>
<li>HMM</li>
<li>N元语法</li>
<li>由字构词的汉语分词方法</li>
</ul>
</li>
</ul>
<h3 id="分词难点"><a href="#分词难点" class="headerlink" title="分词难点"></a>分词难点</h3><h4 id="歧义切分"><a href="#歧义切分" class="headerlink" title="歧义切分"></a>歧义切分</h4><ul>
<li><p>分词规范</p>
<ul>
<li>分词单位<ul>
<li>二字、三字以及结合紧密、使用稳定的</li>
<li>四字成语</li>
<li>四字词或结合紧密、使用稳定的四字词组</li>
</ul>
</li>
<li>五字、五字以上谚语、格言等，分开后如不违背原有组合
意义，应切分</li>
</ul>
</li>
<li><p>歧义切分</p>
<ul>
<li>交集型切分歧义</li>
<li>组合型切分歧义</li>
</ul>
</li>
</ul>
<h4 id="未登录词识别"><a href="#未登录词识别" class="headerlink" title="未登录词识别"></a>未登录词识别</h4><blockquote>
<ul>
<li>词表词：记录在词表中的词</li>
<li>未登录词：词表中没有的词、或已有训练语料中未曾出现词
  （此时也称为<em>out of vocabulary</em>）</li>
</ul>
</blockquote>
<ul>
<li><p>真实文本切分中，未登录词总数大约9成是专有名词，其余为
新词</p>
</li>
<li><p>未登录词对分词精度影响是歧义词的10倍</p>
</li>
<li><p>命名实体识别：实体名词、专业名词</p>
<ul>
<li>界定规则不存在太大分歧、构成形式有一定规律</li>
<li>在文本中只占8.7%，引起分词错误率59.2%</li>
</ul>
</li>
</ul>
<h4 id="词性标注"><a href="#词性标注" class="headerlink" title="词性标注"></a>词性标注</h4><p>词性标注：在给定句子中判定每个词的语法范畴，确定词性并加以
标注的过程</p>
<ul>
<li><p><em>POS</em>作为特征可以更好的识别词语之间关系</p>
<ul>
<li><p>词性标注计数为<em>phrase chunking</em>词组组块的界定、
<em>entities and relationship</em>实体与关系的识别打下良好
基础，有利于深入探索文本语义信息</p>
</li>
<li><p>词组的形式提高了特征向量的语义含量，使得向量更稀疏</p>
</li>
</ul>
</li>
<li><p>难点</p>
<ul>
<li>汉语缺乏词形态变化</li>
<li>常用词兼类现象严重：占11%</li>
<li>研究者主观原因：不同语料库有不同规定、划分方法</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li><em>part of speech</em>：<em>POS</em>，词性</li>
</ul>
</blockquote>
<h3 id="Forward-Maximum-Matching-Method"><a href="#Forward-Maximum-Matching-Method" class="headerlink" title="Forward Maximum Matching Method"></a><em>Forward Maximum Matching Method</em></h3><p><em>FMM</em>：正向最大匹配分词</p>
<ul>
<li><p>步骤</p>
<ul>
<li>记词典中最长此表包含汉字数量为M</li>
<li>从材料中选取前$m = M$个汉字去作为匹配字段，查找分词
词典<ul>
<li>若存在匹配词，则将其切分出</li>
<li>否则$m = m - 1$，重复</li>
</ul>
</li>
<li>重复直至材料分词完毕</li>
</ul>
</li>
<li><p>特点</p>
<ul>
<li>对交叉歧义、组合歧义没有解决办法</li>
<li>错误切分率为$\frac 1 {169}$</li>
</ul>
</li>
</ul>
<h3 id="Backward-Maximum-Matching-Method"><a href="#Backward-Maximum-Matching-Method" class="headerlink" title="Backward Maximum Matching Method"></a><em>Backward Maximum Matching Method</em></h3><p><em>BMM</em>：逆向最大匹配分词</p>
<ul>
<li><p>步骤：类似FMM，仅从材料/句子末尾开始处理</p>
</li>
<li><p>特点</p>
<ul>
<li>错误切分率$\frac 1 {245}$，较FMM更有效</li>
</ul>
</li>
</ul>
<h3 id="Bi-direction-Matching-Method"><a href="#Bi-direction-Matching-Method" class="headerlink" title="Bi-direction Matching Method"></a><em>Bi-direction Matching Method</em></h3><p>BM法：双向扫描法</p>
<ul>
<li><p>步骤：比较FMM、BMM法切分结果，决定正确切分</p>
</li>
<li><p>特点</p>
<ul>
<li>可以识别分词中交叉语义</li>
</ul>
</li>
</ul>
<h3 id="N-最短路径"><a href="#N-最短路径" class="headerlink" title="N-最短路径"></a>N-最短路径</h3><ul>
<li><p>思想</p>
<ul>
<li><p>考虑待切分字串$S=c_1 c_2 \cdots c_n$，其中$c_i$为
单个字、$n$为串长</p>
</li>
<li><p>建立节点数为$n+1$的切分有向无环图，各节点编号为
$V_0, V_1, \cdots, V_n$</p>
<ul>
<li>相邻节点间存在边</li>
<li>若$w=c<em>i c</em>{i+1} \cdots c<em>j$是一个词，则节点
$v</em>{i-1}, v_j$直接存在边</li>
<li>所有边距离均为1</li>
</ul>
</li>
<li><p>求有图无环图中最短路径</p>
</li>
</ul>
</li>
</ul>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul>
<li><p>算法时间复杂度为$O(n<em>N</em>K)$</p>
<blockquote>
<ul>
<li>$n$：字串长度</li>
<li>$N$：最短路径数目</li>
<li>$k$：某个字作为词末端字的平均次数</li>
</ul>
</blockquote>
</li>
</ul>
<h4 id="改进—考虑噪声"><a href="#改进—考虑噪声" class="headerlink" title="改进—考虑噪声"></a>改进—考虑噪声</h4><p>基于统计信息的粗分模型</p>
<ul>
<li><p>考虑词串$W$经过信道传输，由于噪声干扰丢失词界切分标志，
到输出端为字串$C$</p>
</li>
<li><p>N-最短路径词语粗分模型可以改进为：求N个候选切分$W$，使得
概率$P(W|C)$为前N个最大值</p>
<script type="math/tex; mode=display">
P(W|C) = \frac {P(W) P(C|W)} {P(C)}</script><blockquote>
<ul>
<li>$P(C)$：字串概率，常数</li>
<li>$P(C|W)$：仅有</li>
</ul>
</blockquote>
</li>
<li><p>采用一元统计模型，设$W=w_1w_2\cdots W_m$是字串
$S=c_1c_2\cdots c_n$的切分结果，则其切分概率为</p>
<script type="math/tex; mode=display">\begin{align*}
P(W) & = \prod_{i=1}^m P(w_i) \\
P^{*}(W) = -ln P(w) = \sum_{i=1}^m (-ln P(W_i))
\end{align*}</script><blockquote>
<ul>
<li>$P(w_i)$：词$w_i$出现概率，在大规模预料训练的基础上
 通过极大似然方法得到</li>
</ul>
</blockquote>
</li>
<li><p>则$-lnP(w_i)$可看作是词$w_i$在切分有向无环图中对应距离，
改进N-最短路径方法</p>
</li>
</ul>
<h3 id="由字构词"><a href="#由字构词" class="headerlink" title="由字构词"></a>由字构词</h3><h4 id="假设、背景"><a href="#假设、背景" class="headerlink" title="假设、背景"></a>假设、背景</h4><blockquote>
<ul>
<li>思想：将分词过程看作字分类问题，认为每个字在构造特定词语
  时，<strong>占据确定的位置</strong></li>
</ul>
</blockquote>
<ul>
<li>中文词一般不超过4个字，字位数量很小<ul>
<li>首部B</li>
<li>词中M</li>
<li>词尾E</li>
<li>单独成词S</li>
</ul>
</li>
<li>部分汉字按一定方式分布，有规律</li>
<li>利用相对固定的字推断相对不定的字的位置问题</li>
<li>虽然无法将所有词列入词典，但字基本稳定</li>
</ul>
<h4 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h4><ul>
<li>对所有字根据预定义的特征进行<strong>词位特征学习</strong>，获得概率
模型</li>
<li>在带待分字串上根据字与字之间的结合紧密程度得到词位的分类
结果</li>
<li>根据词位定义直接获得最终分词结果</li>
</ul>
<h4 id="Productivity"><a href="#Productivity" class="headerlink" title="Productivity"></a><em>Productivity</em></h4><p>能产度：词$c_i$在词位$t_j$的能产度定义为</p>
<script type="math/tex; mode=display">
P_{c_i}(t_j) = \frac {count(c_i, t_j)}
    \sum_{t_j \in T} count(c_i, t_j)</script><blockquote>
<ul>
<li>$T = {B, B_2, B_3, M, E, S}$</li>
</ul>
</blockquote>
<ul>
<li><p>主词位：给定字在其上能产度高于0.5的词位</p>
<p>|标记|B|B2|B3|M|E|S|总字量|
|——-|——-|——-|——-|——-|——-|——-|——-|
|字量|1634|156|27|33|1438|632|3920|
|百分比|31.74|3.03|0.52|0.64|27.94|12.28|76.16|</p>
<blockquote>
<ul>
<li>MSRA2005语料库中有主词位的字量分布</li>
</ul>
</blockquote>
</li>
<li><p>自由字：没有主词位的字</p>
<ul>
<li>自由字是基于词位分类的分词操作得以有效进行的的基础
之一</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>字：不仅限于汉字，包括标点、外文字母、注音符号、数字等
  任何可能文字符号</li>
</ul>
</blockquote>
<h4 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h4><ul>
<li>能平衡词表词、未登录词</li>
<li>简化分词系统设计<ul>
<li>无需强调词表词信息</li>
<li>无需设置特定未登录词识别模块</li>
</ul>
</li>
</ul>
<h3 id="分词评价指标"><a href="#分词评价指标" class="headerlink" title="分词评价指标"></a>分词评价指标</h3><ul>
<li>正确率</li>
<li>召回率</li>
<li>F-测度值</li>
</ul>
<h2 id="Vector-Space-Model"><a href="#Vector-Space-Model" class="headerlink" title="Vector Space Model"></a><em>Vector Space Model</em></h2><p>向量空间模型：自然语言处理常用模型</p>
<blockquote>
<ul>
<li><em>document</em>：文档，句子、段落、整篇文章</li>
<li><em>term/feature</em>：词根、词、短语、其他</li>
<li><em>weight</em>：项的权重，每个特征项在文档中重要程度</li>
</ul>
</blockquote>
<h3 id="相似度比较"><a href="#相似度比较" class="headerlink" title="相似度比较"></a>相似度比较</h3><ul>
<li><p>内积</p>
<script type="math/tex; mode=display">
sim(D_1, D_2) = \sum_{k=1}^n w_{1,k} w_{2,k}</script></li>
<li><p>Cosine相似度</p>
<script type="math/tex; mode=display">
cos(D_1, D_2) = cos \theta = \frac
   {\sum_{k=1}^n w_{1,k} w_{2,k}}
   {\sqrt{\sum_{k=1}^n w_{1,k}^2 \sum_{k=1}^n w_{2,k}^2}}</script></li>
</ul>
<h3 id="权重"><a href="#权重" class="headerlink" title="权重"></a>权重</h3><ul>
<li>布尔权重：$bw_{t,d} = {0, 1}$</li>
<li><em>TF</em>：绝对词频，$TF<em>{t,d} = \frac {n</em>{t,d}} {n_d}$</li>
<li><em>IDF</em>：倒排文档频度，$IDF_{t,d} = log \frac M {m_t}$</li>
<li><em>TF-IDF</em>：$TF-IDF<em>{t,d} = TF</em>{t,d} * IDF_{t,d}$</li>
<li><em>TF-IWF</em>：$TF<em>IWF</em>{t,d}= TF<em>{t,d} log \frac {\sum</em>{t=1}^T \sum<em>{d=1}^N n</em>{t,d}} {\sum<em>{t=1} n</em>{t,d}}$</li>
</ul>
<blockquote>
<ul>
<li>$t_{t,d}$：文档$d$中出现特征$t$的次数</li>
<li>$t_d$：文档$d$中出现总词数</li>
<li>$m_t$：训练集中出现特征$t$文档数</li>
<li>$M$：训练集中文档总数</li>
<li>$K$：特征总数量</li>
</ul>
</blockquote>
<h4 id="特征加权"><a href="#特征加权" class="headerlink" title="特征加权"></a>特征加权</h4><ul>
<li><p>特征加权主要包括三个部分（层次）</p>
<ul>
<li>局部加权：使用词语在文档中的统计量</li>
<li>全局加权：词语在整个数据集中的统计量</li>
<li>标准化</li>
</ul>
</li>
<li><p>一般化特征加权表达式</p>
<script type="math/tex; mode=display">
L_d(w) G(w) N_d</script><blockquote>
<ul>
<li>$L_d(w)$：词$w$在文档$d$中的局部权重</li>
<li>$G(w)$：词$w$在文档集合中的全局权重</li>
<li>$N_d$：文档d的标准化因子</li>
</ul>
</blockquote>
</li>
</ul>
<h3 id="Document-Frequency"><a href="#Document-Frequency" class="headerlink" title="Document Frequency"></a><em>Document Frequency</em></h3><p><em>DF</em>：文档频率，文本数据中包含某词条的文档数目</p>
<ul>
<li><p>通过文档频率进行特征选择：按文档频率大小对词条进行排序</p>
<ul>
<li><p>将DF小于某阈值的词删除</p>
<ul>
<li>稀有词项全局影响力不大</li>
<li>文档若有稀有词向，通常也会有常见词项</li>
</ul>
<blockquote>
<ul>
<li>和通常信息获取观念抵触：稀有更有代表性</li>
</ul>
</blockquote>
</li>
<li><p>将DF大于某阈值的词删除</p>
<ul>
<li>太频繁词词项没有区分度</li>
</ul>
</li>
</ul>
</li>
<li><p>容易实现、可扩展性好</p>
</li>
</ul>
<h3 id="其他指标"><a href="#其他指标" class="headerlink" title="其他指标"></a>其他指标</h3><ul>
<li><p>信息增益/互信息</p>
</li>
<li><p>卡方统计量</p>
</li>
</ul>
<h2 id="Latent-Semantic-Analysis"><a href="#Latent-Semantic-Analysis" class="headerlink" title="Latent Semantic Analysis"></a><em>Latent Semantic Analysis</em></h2><p><em>LSA</em>：潜在语义分析</p>
<ul>
<li><p>文本分析中常用的降维技术</p>
<ul>
<li>特征重构方法</li>
<li>很好解决了同义词、一词多义等现象给文本分析造成的困难</li>
</ul>
</li>
<li><p>理论依据、假设</p>
<ul>
<li>认为有潜在语义结构隐含在文档中词语的上下文使用模式中</li>
<li>而文档词频共现矩阵在一定程度可以反映词和不同主题之间
关系</li>
</ul>
</li>
<li><p>以文档词频矩阵为基础进行分析</p>
<ul>
<li>得到向量空间模型中文档、词的高维表示</li>
<li>并通过投影形成文档、词在潜在语义空间中的相对稠密的
低维表示，缩小问题规模</li>
<li>通过这种低维表示解释出“文档-语义-词语”之间的联系</li>
</ul>
</li>
<li><p>数学描述</p>
<ul>
<li>LSA将每个文本视为以词语/特征为维度的空间的点，包含
语义的文本出现在空间中分布服从某种语义结构</li>
<li>LSA将每个词视为以文档为维度的空间中点</li>
<li>文档由词语构成，词语需要放在文档中理解，体现词语和
文档之间的双重概率关系</li>
</ul>
</li>
</ul>
<h3 id="应用SVD分解"><a href="#应用SVD分解" class="headerlink" title="应用SVD分解"></a>应用SVD分解</h3><ul>
<li><p>词频共现矩阵$X=(x_{d,t})$：文档、词语的共现频率矩阵</p>
<ul>
<li>其中每行代表文档向量</li>
<li>每列代表词语向量</li>
<li>元素$x_{d,t}$表示文档$d$中词$t$出现的频率</li>
</ul>
</li>
<li><p>对词频共现矩阵$X$进行SVD分解得到$X=U \Sigma V^T$</p>
</li>
<li><p>仅保留$\Sigma$中满足阈值要求的较大的前$r$特征值，
其余置为0，得到
$\tilde X = \tilde U \tilde \Sigma \tilde V^T$，达到信息
过滤、去除噪声的目的</p>
<ul>
<li>$A = \tilde X$：矩阵特征分解后的文档词频矩阵近似</li>
<li>$T = \tilde U$：文档和潜在语义的关系矩阵近似</li>
<li>$S = \tilde V$：词语和潜在语义的关系矩阵近似</li>
<li>$D = \tilde \Sigma$：各潜在语义的重要程度</li>
</ul>
</li>
</ul>
<h4 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h4><ul>
<li><p>从数据压缩角度：近似矩阵是秩为$K$的前提下，矩阵$X$的最小
二乘意义下最佳近似</p>
</li>
<li><p>r值过大会增加运算量，一般选择K使得贡献率满足</p>
<script type="math/tex; mode=display">
\sum_{i=1}^r d_i / \sum_{i=1}^K d_i \geq \theta</script><blockquote>
<ul>
<li>$\theta$：阈值</li>
<li>$K$：原始词频共现矩阵秩</li>
</ul>
</blockquote>
</li>
<li><p>LSA缺点</p>
<ul>
<li>SVD的向量元素有正、有负，性质难以解释</li>
<li>SVD的实际意义不够明确，难以控制词义据类的效果</li>
<li>涉及高维矩阵运算</li>
</ul>
</li>
</ul>
<h3 id="相似关系计算"><a href="#相似关系计算" class="headerlink" title="相似关系计算"></a>相似关系计算</h3><ul>
<li><p>潜在语义空间中存在：词-词、文本-文本、词-文本3种关系，
可以通过近似矩阵$T, S, D$计算</p>
</li>
<li><p>比较词汇两两相似度：“正向乘法”</p>
<script type="math/tex; mode=display">A A^T = T S D^T D S^T T^T = T S^2 T^T</script></li>
<li><p>比较文本两两相似度：“逆向乘法”</p>
<script type="math/tex; mode=display">A^T A = T^T S^T D D^T S T = T^T S^2 T</script></li>
<li><p>词汇、文本两两相似度：就是原始矩阵$X$的近似矩阵本身$A$</p>
<script type="math/tex; mode=display">A = T * S * D^T</script></li>
</ul>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/categories/ML-Specification/page/0/">Previous</a></div><div class="pagination-next"><a href="/categories/ML-Specification/page/2/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/categories/ML-Specification/">1</a></li><li><a class="pagination-link" href="/categories/ML-Specification/page/2/">2</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithm/"><span class="level-start"><span class="level-item">Algorithm</span></span><span class="level-end"><span class="level-item tag">36</span></span></a><ul><li><a class="level is-mobile" href="/categories/Algorithm/Data-Structure/"><span class="level-start"><span class="level-item">Data Structure</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/categories/Algorithm/Heuristic/"><span class="level-start"><span class="level-item">Heuristic</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Algorithm/Issue/"><span class="level-start"><span class="level-item">Issue</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Algorithm/Problem/"><span class="level-start"><span class="level-item">Problem</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/Algorithm/Specification/"><span class="level-start"><span class="level-item">Specification</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/C-C/"><span class="level-start"><span class="level-item">C/C++</span></span><span class="level-end"><span class="level-item tag">34</span></span></a><ul><li><a class="level is-mobile" href="/categories/C-C/Cppref/"><span class="level-start"><span class="level-item">Cppref</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/C-C/Cstd/"><span class="level-start"><span class="level-item">Cstd</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/C-C/MPI/"><span class="level-start"><span class="level-item">MPI</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/C-C/STL/"><span class="level-start"><span class="level-item">STL</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/CS/"><span class="level-start"><span class="level-item">CS</span></span><span class="level-end"><span class="level-item tag">14</span></span></a><ul><li><a class="level is-mobile" href="/categories/CS/Character/"><span class="level-start"><span class="level-item">Character</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/CS/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/CS/Parallel/"><span class="level-start"><span class="level-item">Parallel</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/CS/Program-Design/"><span class="level-start"><span class="level-item">Program Design</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/CS/Storage/"><span class="level-start"><span class="level-item">Storage</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Daily-Life/"><span class="level-start"><span class="level-item">Daily Life</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/Daily-Life/Maxism/"><span class="level-start"><span class="level-item">Maxism</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">27</span></span></a><ul><li><a class="level is-mobile" href="/categories/Database/Hadoop/"><span class="level-start"><span class="level-item">Hadoop</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Database/SQL-DB/"><span class="level-start"><span class="level-item">SQL DB</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/Database/Spark/"><span class="level-start"><span class="level-item">Spark</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">5</span></span></a><ul><li><a class="level is-mobile" href="/categories/Java/Scala/"><span class="level-start"><span class="level-item">Scala</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">42</span></span></a><ul><li><a class="level is-mobile" href="/categories/Linux/Bash-Programming/"><span class="level-start"><span class="level-item">Bash Programming</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/Configuration/"><span class="level-start"><span class="level-item">Configuration</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/File-System/"><span class="level-start"><span class="level-item">File System</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/IPC/"><span class="level-start"><span class="level-item">IPC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/Process-Schedual/"><span class="level-start"><span class="level-item">Process Schedual</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/Shell/"><span class="level-start"><span class="level-item">Shell</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/Tool/"><span class="level-start"><span class="level-item">Tool</span></span><span class="level-end"><span class="level-item tag">14</span></span></a><ul><li><a class="level is-mobile" href="/categories/Linux/Tool/Vi/"><span class="level-start"><span class="level-item">Vi</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/ML-Model/"><span class="level-start"><span class="level-item">ML Model</span></span><span class="level-end"><span class="level-item tag">21</span></span></a><ul><li><a class="level is-mobile" href="/categories/ML-Model/Linear-Model/"><span class="level-start"><span class="level-item">Linear Model</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/ML-Model/Model-Component/"><span class="level-start"><span class="level-item">Model Component</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/ML-Model/Nolinear-Model/"><span class="level-start"><span class="level-item">Nolinear Model</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/ML-Model/Unsupervised-Model/"><span class="level-start"><span class="level-item">Unsupervised Model</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/ML-Specification/"><span class="level-start"><span class="level-item">ML Specification</span></span><span class="level-end"><span class="level-item tag">17</span></span></a><ul><li><a class="level is-mobile" href="/categories/ML-Specification/Click-Through-Rate/"><span class="level-start"><span class="level-item">Click Through Rate</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/ML-Specification/Click-Through-Rate/Recommandation-System/"><span class="level-start"><span class="level-item">Recommandation System</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/ML-Specification/Computer-Vision/"><span class="level-start"><span class="level-item">Computer Vision</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/ML-Specification/FinTech/"><span class="level-start"><span class="level-item">FinTech</span></span><span class="level-end"><span class="level-item tag">5</span></span></a><ul><li><a class="level is-mobile" href="/categories/ML-Specification/FinTech/Risk-Control/"><span class="level-start"><span class="level-item">Risk Control</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/ML-Specification/Graph-Analysis/"><span class="level-start"><span class="level-item">Graph Analysis</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/ML-Specification/NLP/"><span class="level-start"><span class="level-item">NLP</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/ML-Technique/"><span class="level-start"><span class="level-item">ML Technique</span></span><span class="level-end"><span class="level-item tag">10</span></span></a><ul><li><a class="level is-mobile" href="/categories/ML-Technique/Feature-Engineering/"><span class="level-start"><span class="level-item">Feature Engineering</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/ML-Technique/Neural-Network/"><span class="level-start"><span class="level-item">Neural Network</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/ML-Theory/"><span class="level-start"><span class="level-item">ML Theory</span></span><span class="level-end"><span class="level-item tag">11</span></span></a><ul><li><a class="level is-mobile" href="/categories/ML-Theory/Loss/"><span class="level-start"><span class="level-item">Loss</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/ML-Theory/Model-Enhencement/"><span class="level-start"><span class="level-item">Model Enhencement</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/ML-Theory/Optimization/"><span class="level-start"><span class="level-item">Optimization</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Math-Algebra/"><span class="level-start"><span class="level-item">Math Algebra</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/Math-Algebra/Linear-Algebra/"><span class="level-start"><span class="level-item">Linear Algebra</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Math-Algebra/Universal-Algebra/"><span class="level-start"><span class="level-item">Universal Algebra</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Math-Analysis/"><span class="level-start"><span class="level-item">Math Analysis</span></span><span class="level-end"><span class="level-item tag">23</span></span></a><ul><li><a class="level is-mobile" href="/categories/Math-Analysis/Fourier-Analysis/"><span class="level-start"><span class="level-item">Fourier Analysis</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Math-Analysis/Functional-Analysis/"><span class="level-start"><span class="level-item">Functional Analysis</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Math-Analysis/Optimization/"><span class="level-start"><span class="level-item">Optimization</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/categories/Math-Analysis/Real-Analysis/"><span class="level-start"><span class="level-item">Real Analysis</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Math-Mixin/"><span class="level-start"><span class="level-item">Math Mixin</span></span><span class="level-end"><span class="level-item tag">18</span></span></a><ul><li><a class="level is-mobile" href="/categories/Math-Mixin/Statistics/"><span class="level-start"><span class="level-item">Statistics</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Math-Mixin/Time-Series/"><span class="level-start"><span class="level-item">Time Series</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Probability/"><span class="level-start"><span class="level-item">Probability</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">89</span></span></a><ul><li><a class="level is-mobile" href="/categories/Python/Cookbook/"><span class="level-start"><span class="level-item">Cookbook</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/Jupyter/"><span class="level-start"><span class="level-item">Jupyter</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/Keras/"><span class="level-start"><span class="level-item">Keras</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/Matplotlib/"><span class="level-start"><span class="level-item">Matplotlib</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/Numpy/"><span class="level-start"><span class="level-item">Numpy</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/Pandas/"><span class="level-start"><span class="level-item">Pandas</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/Py3Ref/"><span class="level-start"><span class="level-item">Py3Ref</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/Py3std/"><span class="level-start"><span class="level-item">Py3std</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/Pywin32/"><span class="level-start"><span class="level-item">Pywin32</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/Readme/"><span class="level-start"><span class="level-item">Readme</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/TensorFlow/"><span class="level-start"><span class="level-item">TensorFlow</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/Twists/"><span class="level-start"><span class="level-item">Twists</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/RLang/"><span class="level-start"><span class="level-item">RLang</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Rust/"><span class="level-start"><span class="level-item">Rust</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Set/"><span class="level-start"><span class="level-item">Set</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tool/"><span class="level-start"><span class="level-item">Tool</span></span><span class="level-end"><span class="level-item tag">13</span></span></a><ul><li><a class="level is-mobile" href="/categories/Tool/Editor/"><span class="level-start"><span class="level-item">Editor</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tool/Markup-Language/"><span class="level-start"><span class="level-item">Markup Language</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Tool/Web-Browser/"><span class="level-start"><span class="level-item">Web Browser</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Tool/Windows/"><span class="level-start"><span class="level-item">Windows</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Web/"><span class="level-start"><span class="level-item">Web</span></span><span class="level-end"><span class="level-item tag">6</span></span></a><ul><li><a class="level is-mobile" href="/categories/Web/CSS/"><span class="level-start"><span class="level-item">CSS</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Web/NPM/"><span class="level-start"><span class="level-item">NPM</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Web/Proxy/"><span class="level-start"><span class="level-item">Proxy</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Web/Thrift/"><span class="level-start"><span class="level-item">Thrift</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><!--!--><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/hula_loop_octodex03.gif" alt="UBeaRLy"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">UBeaRLy</p><p class="is-size-6 is-block">Protector of Proxy</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Earth, Solar System</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">392</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">93</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">522</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/xyy15926" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/xyy15926"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-04T15:07:54.896Z">2021-08-04</time></p><p class="title"><a href="/uncategorized/README.html"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-03T07:46:51.000Z">2021-08-03</time></p><p class="title"><a href="/Web/NPM/hexo_config.html">Hexo 建站</a></p><p class="categories"><a href="/categories/Web/">Web</a> / <a href="/categories/Web/NPM/">NPM</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-03T02:32:45.000Z">2021-08-03</time></p><p class="title"><a href="/Web/NPM/config.html">NPM 总述</a></p><p class="categories"><a href="/categories/Web/">Web</a> / <a href="/categories/Web/NPM/">NPM</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-02T08:11:11.000Z">2021-08-02</time></p><p class="title"><a href="/Python/Py3std/internet_data.html">互联网数据</a></p><p class="categories"><a href="/categories/Python/">Python</a> / <a href="/categories/Python/Py3std/">Py3std</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-29T13:55:00.000Z">2021-07-29</time></p><p class="title"><a href="/Linux/Shell/sh_apps.html">Shell 应用程序</a></p><p class="categories"><a href="/categories/Linux/">Linux</a> / <a href="/categories/Linux/Shell/">Shell</a></p></div></article></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">Advertisement</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5385776267343559" data-ad-slot="6995841235" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="https://api.follow.it/subscription-form/WWxwMVBsOUtoNTdMSlJ4Z1lWVnRISERsd2t6ek9MeVpEUWs0YldlZGxUdXlKdDNmMEZVV1hWaFZFYWFSNmFKL25penZodWx3UzRiaVkxcnREWCtOYUJhZWhNbWpzaUdyc1hPangycUh5RTVjRXFnZnFGdVdSTzZvVzJBcTJHKzl8aXpDK1ROWWl4N080YkFEK3QvbEVWNEJuQjFqdWdxODZQcGNoM1NqbERXST0=/8" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="UBeaRLy" height="28"></a><p class="is-size-7"><span>&copy; 2021 UBeaRLy</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">Visited by <span id="busuanzi_value_site_uv">0</span> users</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/xyy15926/proxy"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>